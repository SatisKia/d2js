function _Graphics(){this.f=0}function canUseCanvas(){return!!document.createElement("canvas").getContext}function d2js_onload(){_key_array=[];_key_array[0]=8;_key_array[1]=9;_key_array[2]=13;_key_array[3]=16;_key_array[4]=17;_key_array[5]=32;_key_array[6]=37;_key_array[7]=38;_key_array[8]=39;_key_array[9]=40;_key_array[10]=48;_key_array[11]=49;_key_array[12]=50;_key_array[13]=51;_key_array[14]=52;_key_array[15]=53;_key_array[16]=54;_key_array[17]=55;_key_array[18]=56;_key_array[19]=57;_key_array[20]=67;_key_array[21]=88;_key_array[22]=90;init();_USE_EXCANVAS||canUseCanvas()?(_USE_LAYOUTMOUSE&&(_use_layout=!0,_USE_MOUSE=!0),_USE_LAYOUTTOUCH&&(_use_layout=!0,_USE_TOUCH=!0),_USE_KEY&&(_addEventListener(document,"keydown",_onKeyDown),_addEventListener(document,"keyup",_onKeyUp)),_USE_TOUCH&&(_addEventListener(document,"touchstart",_onTouchStart),_addEventListener(document,"touchmove",_onTouchMove),_addEventListener(document,"touchend",_onTouchEnd)),_text=document.createElement("span"),_text.style.cssText=_text_style,document.body.appendChild(_text),start()&&setTimer()):error()}function d2js_onorientationchange(){processEvent(13,window.orientation)}function d2js_onresize(){processEvent(14,0)}function setTimer(){_kill_timer=!1;_loop()}function killTimer(){_kill_timer=!0}function repaint(){if(_USE_DRAWSTRINGEX&&(_stringex_num=0),_context.clearRect(0,0,getWidth(),getHeight()),_context.save(),paint(_g),_context.restore(),_USE_DRAWSTRINGEX)for(var n=_stringex_num;n<_stringex.length;n++)_stringex[n].innerHTML=""}function _getSleepTime(){_sleep_time=frameTime()-(_end_time-_start_time);_sleep_time<0&&(_sleep_time=0);_sleep_time>frameTime()&&(_sleep_time=frameTime())}function _sleep(){while(_end_time>_start_time&&_end_time-_start_time<frameTime())_end_time=currentTimeMillis()}function _loop(){if(_kill_timer){_kill_timer=!1;return}_start_time=currentTimeMillis();repaint();_end_time=currentTimeMillis();_USE_REQUESTANIMATIONFRAME?window.requestAnimationFrame?(_sleep(),window.requestAnimationFrame(_loop)):window.webkitRequestAnimationFrame?(_sleep(),window.webkitRequestAnimationFrame(_loop)):window.mozRequestAnimationFrame?(_sleep(),window.mozRequestAnimationFrame(_loop)):window.oRequestAnimationFrame?(_sleep(),window.oRequestAnimationFrame(_loop)):window.msRequestAnimationFrame?(_sleep(),window.msRequestAnimationFrame(_loop)):(_getSleepTime(),window.setTimeout(_loop,_sleep_time)):(_getSleepTime(),window.setTimeout(_loop,_sleep_time))}function _addEventListener(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i}function _removeEventListener(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=null}function setCurrent(n){_canvas=document.getElementById(n);_context=_canvas.getContext("2d");_lock=!1;_context.textAlign="left";_context.textBaseline="bottom";_USE_MOUSE&&(_addEventListener(_canvas,"mousedown",_onMouseDown),_addEventListener(_canvas,"mousemove",_onMouseMove),_addEventListener(_canvas,"mouseout",_onMouseOut),_addEventListener(_canvas,"mouseover",_onMouseOver),_addEventListener(_canvas,"mouseup",_onMouseUp));_g=new _Graphics}function setGraphics(n){_g=n}function getCurrent(){return _canvas}function getCurrentContext(){return _context}function getGraphics(){return _g}function setCanvasSize(n,t){_canvas.width=n;_canvas.height=t;_context.textAlign="left";_context.textBaseline="bottom"}function getWidth(){return parseInt(_canvas.width)}function getHeight(){return parseInt(_canvas.height)}function _getLeft(n){for(var t=0;n;)t+=n.offsetLeft,n=n.offsetParent;return t}function _getTop(n){for(var t=0;n;)t+=n.offsetTop,n=n.offsetParent;return t}function getBrowserWidth(){if(!!document.documentElement&&document.documentElement.clientWidth>0)return document.documentElement.clientWidth;if(!document.body){if(!!window.innerWidth)return window.innerWidth}else return document.body.clientWidth;return 0}function getBrowserHeight(){if(!!document.documentElement&&document.documentElement.clientHeight>0)return document.documentElement.clientHeight;if(!document.body){if(!!window.innerHeight)return window.innerHeight}else return document.body.clientHeight;return 0}function getOrientation(){return window.orientation}function readParameter(n,t){var u="",i=n.indexOf("?"+t+"="),r;return i<0&&(i=n.indexOf("&"+t+"=")),i>=0&&(i+=t.length+2,r=n.indexOf("&",i),r<0&&(r=n.length),u=n.substring(i,r)),decodeURIComponent(u)}function readParameters(n){for(var i,r=n.split("&"),u=[],t=0;t<r.length;t++)i=r[t].split("="),u[i[0]]=decodeURIComponent(i[1]);return u}function getParameter(n){return readParameter(location.href,n)}function getResImage(n){return document.getElementById(n)}function getResString(n){var t=document.getElementById(n).innerHTML;return t=t.replace(new RegExp("&lt;","igm"),"<"),t.replace(new RegExp("&gt;","igm"),">")}function currentTimeMillis(){return(new Date).getTime()}function setKeyArray(n){var i=n.length,t;for(_key_array=[],t=0;t<i;t++)_key_array[t]=n[t]}function keyBit(n){for(var i=_key_array.length,t=0;t<i;t++)if(_key_array[t]==n)return 1<<t;return 0}function _onKeyDown(n){var t=keyBit(n.keyCode);(_key&t)==0&&(_key+=t);processEvent(4,n.keyCode)}function _onKeyUp(n){var t=keyBit(n.keyCode);(_key&t)!=0&&(_key-=t);processEvent(5,n.keyCode)}function getKeypadState(){return _key}function __MainLayout(n,t,i,r,u){this.x=n;this.y=t;this.width=i;this.height=r;this.id=u;this.shape=null;this.coords=null}function clearLayout(){_layout=[]}function addLayout(n,t,i,r,u){_layout[_layout.length]=new __MainLayout(n,t,i,r,u)}function addLayoutArea(n,t,i,r,u,f,e){var s,o;if(addLayout(n,t,i,r,u),!!_context.isPointInPath)for(_layout[_layout.length-1].shape=f,s=e.split(","),_layout[_layout.length-1].coords=new Array(s.length),o=0;o<s.length;o++)_layout[_layout.length-1].coords[o]=parseInt(s[o])}function getLayout(n){if(_layout.length>0)for(var t=0;t<_layout.length;t++)if(_layout[t].id==n)return _layout[t];return null}function checkLayout(n,t){var i,r;if(_layout.length>0)for(i=0;i<_layout.length;i++)if(_layout[i].shape==null){if(n>=_layout[i].x&&n<_layout[i].x+_layout[i].width&&t>=_layout[i].y&&t<_layout[i].y+_layout[i].height)return _layout[i].id}else{if(_context.beginPath(),_layout[i].shape=="circle")_context.arc(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[1],_layout[i].coords[2],0,Math.PI*2,!1);else if(_layout[i].shape=="poly"){for(_context.moveTo(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[1]),r=2;r<_layout[i].coords.length-1;r+=2)_context.lineTo(_layout[i].x+_layout[i].coords[r],_layout[i].y+_layout[i].coords[r+1]);_context.closePath()}else _layout[i].shape=="rect"&&(_context.moveTo(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[1]),_context.lineTo(_layout[i].x+_layout[i].coords[2],_layout[i].y+_layout[i].coords[1]),_context.lineTo(_layout[i].x+_layout[i].coords[2],_layout[i].y+_layout[i].coords[3]),_context.lineTo(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[3]),_context.closePath());if(_context.isPointInPath(n,t))return _layout[i].id}return-1}function getLayoutState(){for(var i=0,t,n=0;n<_touch_x.length;n++)t=checkLayout(_touch_x[n],_touch_y[n]),t>=0&&(i|=1<<t);return i}function layoutBit(n){return 1<<n}function _getMouse(n){_mouse_x=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-_getLeft(_canvas);_mouse_y=n.clientY+document.body.scrollTop+document.documentElement.scrollTop-_getTop(_canvas)}function _onMouseDown(n){if(_getMouse(n),_use_layout&&_layout.length>0){var t=checkLayout(_mouse_x,_mouse_y);if(t>=0){processEvent(6,t);return}}processEvent(8,0)}function _onMouseMove(n){_getMouse(n);processEvent(9,0)}function _onMouseOut(n){_getMouse(n);processEvent(10,0)}function _onMouseOver(n){_getMouse(n);processEvent(11,0)}function _onMouseUp(n){if(_getMouse(n),_use_layout&&_layout.length>0){var t=checkLayout(_mouse_x,_mouse_y);if(t>=0){processEvent(7,t);return}}processEvent(12,0)}function getMouseX(){return _mouse_x}function getMouseY(){return _mouse_y}function _getTouch(n){_touch_x=[];_touch_y=[];for(var t=0;t<n.touches.length;t++)_touch_x[t]=n.touches[t].pageX-_getLeft(_canvas),_touch_y[t]=n.touches[t].pageY-_getTop(_canvas)}function _onTouchStart(n){if(_getTouch(n),_touch_x0=_touch_x[0],_touch_y0=_touch_y[0],_touch_x0>=0&&_touch_x0<getWidth()&&_touch_y0>=0&&_touch_y0<getHeight()){if(_touch_start=!0,_use_layout&&_layout.length>0){var t=checkLayout(_touch_x0,_touch_y0);if(t>=0){processEvent(6,t);n.preventDefault();return}}processEvent(15,0);n.preventDefault()}}function _onTouchMove(n){_touch_start&&(_getTouch(n),_touch_x0=_touch_x[0],_touch_y0=_touch_y[0],processEvent(16,0),n.preventDefault())}function _onTouchEnd(n){if(_touch_start){if(_touch_start=!1,_getTouch(n),_use_layout&&_layout.length>0){var t=checkLayout(_touch_x0,_touch_y0);if(t>=0){processEvent(7,t);n.preventDefault();return}}processEvent(17,0);n.preventDefault()}}function touchNum(){return _touch_x.length}function getTouchX(n){return n<_touch_x.length?_touch_x[n]:_touch_x0}function getTouchY(n){return n<_touch_y.length?_touch_y[n]:_touch_y0}function launch(n){location.replace(n)}function setFont(n,t){_font_size=n;_font_family=t.indexOf(" ")>=0?"'"+t+"'":t;_text.style.cssText=_text_style+";font:"+_font_size+"px "+_font_family}function stringWidth(n){_text.innerHTML="'";var t=_text.offsetWidth;return n=n.replace(new RegExp("<","igm"),"&lt;"),n=n.replace(new RegExp(">","igm"),"&gt;"),_text.innerHTML="'"+n+"'",_text.offsetWidth-t*2}function fontHeight(){return _font_size}function _drawStringEx(n,t,i){_lock||(_stringex_num>=_stringex.length&&(_stringex[_stringex_num]=document.createElement("span"),_stringex[_stringex_num].style.cssText="position:absolute",document.body.appendChild(_stringex[_stringex_num]),_USE_MOUSE&&(_addEventListener(_stringex[_stringex_num],"mousedown",_onMouseDown),_addEventListener(_stringex[_stringex_num],"mousemove",_onMouseMove),_addEventListener(_stringex[_stringex_num],"mouseup",_onMouseUp))),_stringex[_stringex_num].style.cssText="position:absolute;left:"+(_getLeft(_canvas)+t)+"px;top:"+(_getTop(_canvas)+i-_font_size)+"px;color:"+_color+";font:"+_font_size+"px "+_font_family,n=n.replace(new RegExp("<","igm"),"&lt;"),n=n.replace(new RegExp(">","igm"),"&gt;"),_stringex[_stringex_num].innerHTML=n,_stringex_num++)}function _Random(){}function _Vector(n){this.o=new Array(n);this.n=0}function MainObject(n,t,i,r){this.x=n;this.y=t;this.dx=i;this.dy=r;this.col=g.getColorOfRGB(Math.abs(rand.next(256)),Math.abs(rand.next(256)),Math.abs(rand.next(256)))}function frameTime(){return 1e3/60}function init(){_USE_REQUESTANIMATIONFRAME=!0;_USE_TOUCH=!0}function start(){return setCurrent("canvas0"),document.getElementById("div0").innerHTML=_USE_REQUESTANIMATIONFRAME?window.requestAnimationFrame?"requestAnimationFrame":window.webkitRequestAnimationFrame?"webkitRequestAnimationFrame":window.mozRequestAnimationFrame?"mozRequestAnimationFrame":window.oRequestAnimationFrame?"oRequestAnimationFrame":window.msRequestAnimationFrame?"msRequestAnimationFrame":"setTimeout":"setTimeout",rand=new _Random,object=new _Vector(128),touch=!1,_elapse=0,_time=currentTimeMillis(),window.native_request=new NativeRequest,window.native_request2=new NativeRequest,window.native_request2.setScheme("native"),!0}function paint(n){for(var i,t=0;t<object.size();t++)i=object.elementAt(t),i.update();for(n.setColor(n.getColorOfRGB(127,127,127)),n.fillRect(0,0,getWidth(),getHeight()),t=0;t<object.size();t++)i=object.elementAt(t),i.draw();touch&&(n.setColor(n.getColorOfRGB(255,0,255)),n.drawLine(touch_sx,touch_sy,touch_ex,touch_ey));n.setColor(n.getColorOfRGB(255,0,0));n.setFont(24,"ＭＳ ゴシック");n.drawString(""+(_elapse+1)*1e3/(currentTimeMillis()-_time),0,n.fontHeight());n.drawString(""+object.size(),0,n.fontHeight()*2);_elapse++}function processEvent(n){switch(n){case 15:touch_sx=getTouchX(0);touch_sy=getTouchY(0);touch_ex=touch_sx;touch_ey=touch_sy;touch=!0;break;case 16:touch&&(touch_ex=getTouchX(0),touch_ey=getTouchY(0));break;case 17:touch&&(touch_ex=getTouchX(0),touch_ey=getTouchY(0),touch=!1,object.addElement(new MainObject(touch_ex,touch_ey,(touch_sx-touch_ex)/10,(touch_sy-touch_ey)/10)))}}function error(){launch("error.html")}var rand,object,touch_sx,touch_sy,touch_ex,touch_ey,touch,_elapse,_time;_Graphics.prototype={canUseClip:function(){return!!_context.clip},canUseText:function(){return!!_context.fillText},getColorOfRGB:function(n,t,i){return"rgb("+n+","+t+","+i+")"},setStrokeWidth:function(n){_context.lineWidth=n},setColor:function(n){_color=n;_context.fillStyle=_color;_context.strokeStyle=_color},setAlpha:function(n){_context.globalAlpha=n/255},setROP:function(n){_context.globalCompositeOperation=n},setFont:function(n,t){setFont(n,t);_context.font=""+_font_size+"px "+_font_family},stringWidth:function(n){return stringWidth(n)},fontHeight:function(){return fontHeight()},clearClip:function(){_context.restore();_context.save()},setClip:function(n,t,i,r){!_context.clip||(_context.restore(),_context.save(),_context.beginPath(),_context.moveTo(n,t),_context.lineTo(n+i,t),_context.lineTo(n+i,t+r),_context.lineTo(n,t+r),_context.closePath(),_context.clip())},drawLine:function(n,t,i,r){_context.beginPath();_context.moveTo(n+.5,t+.5);_context.lineTo(i+.5,r+.5);_context.stroke();_context.closePath()},drawRect:function(n,t,i,r){_context.strokeRect(n+.5,t+.5,i,r)},fillRect:function(n,t,i,r){_context.fillRect(n,t,i,r)},drawCircle:function(n,t,i){_context.beginPath();_context.arc(n,t,i,0,Math.PI*2,!1);_context.stroke()},drawString:function(n,t,i){_context.fillText?_context.fillText(n,t,i):_USE_DRAWSTRINGEX&&_drawStringEx(n,t,i)},setFlipMode:function(n){this.f=n},drawScaledImage:function(n,t,i,r,u,f,e,o,s){if(this.f==0)try{_context.drawImage(n,f,e,o,s,t,i,r,u)}catch(h){}else{_context.save();_context.setTransform(1,0,0,1,0,0);switch(this.f){case 1:_context.translate(t+r,i);_context.scale(-1,1);break;case 2:_context.translate(t,i+u);_context.scale(1,-1);break;case 3:_context.translate(t+r,i+u);_context.scale(-1,-1)}try{_context.drawImage(n,f,e,o,s,0,0,r,u)}catch(h){}_context.restore()}},drawImage:function(n,t,i){this.drawScaledImage(n,t,i,n.width,n.height,0,0,n.width,n.height)},drawTransImage:function(n,t,i,r,u,f,e,o,s,h,c,l){_context.save();_context.setTransform(1,0,0,1,0,0);_context.translate(t,i);_context.rotate(Math.PI*h/180);_context.scale(c/128,l/128);_context.translate(-o,-s);try{_context.drawImage(n,r,u,f,e,0,0,f,e)}catch(a){}_context.restore()}};window._USE_AUDIOEX=!1;window._USE_DRAWSTRINGEX=!1;window._USE_EXCANVAS=!1;window._USE_KEY=!1;window._USE_MOUSE=!1;window._USE_TOUCH=!1;window._USE_LAYOUTMOUSE=!1;window._USE_LAYOUTTOUCH=!1;window._USE_REQUESTANIMATIONFRAME=!1;var _kill_timer=!1,_start_time,_end_time,_sleep_time,_canvas,_context,_lock,_g,_key=0,_key_array,_use_layout=!1,_layout=[],_mouse_x,_mouse_y,_touch_start=!1,_touch_x=[],_touch_y=[],_touch_x0,_touch_y0,_color,_font_size,_font_family,_stringex=[],_stringex_num,_text,_text_style="visibility:hidden;position:absolute;left:0;top:0";_Random.prototype={next:function(n){return Math.random()<.5?-Math.floor(Math.random()*n):Math.floor(Math.random()*n)},nextInt:function(){return Math.random()<.5?-Math.floor(Math.random()*2147483648):Math.floor(Math.random()*2147483648)}};_Vector.prototype={size:function(){return this.n},isEmpty:function(){return this.n==0},elementAt:function(n){return this.o[n]},firstElement:function(){return this.o[0]},lastElement:function(){return this.o[this.n-1]},setElementAt:function(n,t){t>=0&&t<this.n&&(this.o[t]=n)},removeElementAt:function(n){if(n>=0&&n<this.n){for(this.i=n;this.i<this.n-1;this.i++)this.o[this.i]=this.o[this.i+1];this.n--}},insertElementAt:function(n,t){if(t>=0&&t<this.n){for(this.i=this.n-1;this.i>=t;this.i--)this.o[this.i+1]=this.o[this.i];this.o[t]=n;this.n++}},addElement:function(n){this.o[this.n]=n;this.n++},removeAllElements:function(){this.n=0}};MainObject.prototype.update=function(){this.x+=this.dx;(this.x<0||this.x>=getWidth())&&(hit(),this.dx=-this.dx);this.y+=this.dy;(this.y<0||this.y>=getHeight())&&(hit(),this.dy=-this.dy)};MainObject.prototype.draw=function(){g.setColor(this.col);g.fillRect(this.x-5,this.y-5,10,10)}