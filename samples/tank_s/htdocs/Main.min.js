function _Graphics(){this.f=0}function canUseCanvas(){return!!document.createElement("canvas").getContext}function d2js_onload(){_key_array=[];_key_array[0]=8;_key_array[1]=9;_key_array[2]=13;_key_array[3]=16;_key_array[4]=17;_key_array[5]=32;_key_array[6]=37;_key_array[7]=38;_key_array[8]=39;_key_array[9]=40;_key_array[10]=48;_key_array[11]=49;_key_array[12]=50;_key_array[13]=51;_key_array[14]=52;_key_array[15]=53;_key_array[16]=54;_key_array[17]=55;_key_array[18]=56;_key_array[19]=57;_key_array[20]=67;_key_array[21]=88;_key_array[22]=90;init();_USE_EXCANVAS||canUseCanvas()?(_USE_LAYOUTMOUSE&&(_use_layout=!0,_USE_MOUSE=!0),_USE_LAYOUTTOUCH&&(_use_layout=!0,_USE_TOUCH=!0),_USE_KEY&&(_addEventListener(document,"keydown",_onKeyDown),_addEventListener(document,"keyup",_onKeyUp)),_USE_TOUCH&&(_addEventListener(document,"touchstart",_onTouchStart),_addEventListener(document,"touchmove",_onTouchMove),_addEventListener(document,"touchend",_onTouchEnd)),_text=document.createElement("span"),_text.style.cssText=_text_style,document.body.appendChild(_text),start()&&setTimer()):error()}function d2js_onorientationchange(){processEvent(13,window.orientation)}function d2js_onresize(){processEvent(14,0)}function setTimer(){_kill_timer=!1;_loop()}function killTimer(){_kill_timer=!0}function repaint(){if(_USE_DRAWSTRINGEX&&(_stringex_num=0),_context.clearRect(0,0,getWidth(),getHeight()),_context.save(),paint(_g),_context.restore(),_USE_DRAWSTRINGEX)for(var n=_stringex_num;n<_stringex.length;n++)_stringex[n].innerHTML=""}function _getSleepTime(){_sleep_time=frameTime()-(_end_time-_start_time);_sleep_time<0&&(_sleep_time=0);_sleep_time>frameTime()&&(_sleep_time=frameTime())}function _sleep(){while(_end_time>_start_time&&_end_time-_start_time<frameTime())_end_time=currentTimeMillis()}function _loop(){if(_kill_timer){_kill_timer=!1;return}_start_time=currentTimeMillis();repaint();_end_time=currentTimeMillis();_USE_REQUESTANIMATIONFRAME?window.requestAnimationFrame?(_sleep(),window.requestAnimationFrame(_loop)):window.webkitRequestAnimationFrame?(_sleep(),window.webkitRequestAnimationFrame(_loop)):window.mozRequestAnimationFrame?(_sleep(),window.mozRequestAnimationFrame(_loop)):window.oRequestAnimationFrame?(_sleep(),window.oRequestAnimationFrame(_loop)):window.msRequestAnimationFrame?(_sleep(),window.msRequestAnimationFrame(_loop)):(_getSleepTime(),window.setTimeout(_loop,_sleep_time)):(_getSleepTime(),window.setTimeout(_loop,_sleep_time))}function _addEventListener(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i}function _removeEventListener(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=null}function setCurrent(n){_canvas=document.getElementById(n);_context=_canvas.getContext("2d");_lock=!1;_context.textAlign="left";_context.textBaseline="bottom";_g=new _Graphics;_USE_MOUSE&&(_addEventListener(_canvas,"mousedown",_onMouseDown),_addEventListener(_canvas,"mousemove",_onMouseMove),_addEventListener(_canvas,"mouseout",_onMouseOut),_addEventListener(_canvas,"mouseover",_onMouseOver),_addEventListener(_canvas,"mouseup",_onMouseUp))}function setGraphics(n){_g=n}function getCurrent(){return _canvas}function getCurrentContext(){return _context}function getGraphics(){return _g}function setCanvasSize(n,t){_canvas.width=n;_canvas.height=t;_context.textAlign="left";_context.textBaseline="bottom"}function getWidth(){return parseInt(_canvas.width)}function getHeight(){return parseInt(_canvas.height)}function _getLeft(n){for(var t=0;n;)t+=n.offsetLeft,n=n.offsetParent;return t}function _getTop(n){for(var t=0;n;)t+=n.offsetTop,n=n.offsetParent;return t}function getBrowserWidth(){if(!!document.documentElement&&document.documentElement.clientWidth>0)return document.documentElement.clientWidth;if(!document.body){if(!!window.innerWidth)return window.innerWidth}else return document.body.clientWidth;return 0}function getBrowserHeight(){if(!!document.documentElement&&document.documentElement.clientHeight>0)return document.documentElement.clientHeight;if(!document.body){if(!!window.innerHeight)return window.innerHeight}else return document.body.clientHeight;return 0}function getOrientation(){return window.orientation}function readParameter(n,t){var u="",i=n.indexOf("?"+t+"="),r;return i<0&&(i=n.indexOf("&"+t+"=")),i>=0&&(i+=t.length+2,r=n.indexOf("&",i),r<0&&(r=n.length),u=n.substring(i,r)),decodeURIComponent(u)}function readParameters(n){for(var i,r=n.split("&"),u=[],t=0;t<r.length;t++)i=r[t].split("="),u[i[0]]=decodeURIComponent(i[1]);return u}function getParameter(n){return readParameter(location.href,n)}function getResImage(n){return document.getElementById(n)}function getResString(n){var t=document.getElementById(n).innerHTML;return t=t.replace(new RegExp("&lt;","igm"),"<"),t.replace(new RegExp("&gt;","igm"),">")}function currentTimeMillis(){return(new Date).getTime()}function setKeyArray(n){var i=n.length,t;for(_key_array=[],t=0;t<i;t++)_key_array[t]=n[t]}function keyBit(n){for(var i=_key_array.length,t=0;t<i;t++)if(_key_array[t]==n)return 1<<t;return 0}function _onKeyDown(n){var t=keyBit(n.keyCode);(_key&t)==0&&(_key+=t);processEvent(4,n.keyCode)}function _onKeyUp(n){var t=keyBit(n.keyCode);(_key&t)!=0&&(_key-=t);processEvent(5,n.keyCode)}function getKeypadState(){return _key}function __MainLayout(n,t,i,r,u){this.x=n;this.y=t;this.width=i;this.height=r;this.id=u;this.shape=null;this.coords=null}function clearLayout(){_layout=[]}function addLayout(n,t,i,r,u){_layout[_layout.length]=new __MainLayout(n,t,i,r,u)}function addLayoutArea(n,t,i,r,u,f,e){var s,o;if(addLayout(n,t,i,r,u),!!_context.isPointInPath)for(_layout[_layout.length-1].shape=f,s=e.split(","),_layout[_layout.length-1].coords=new Array(s.length),o=0;o<s.length;o++)_layout[_layout.length-1].coords[o]=parseInt(s[o])}function getLayout(n){if(_layout.length>0)for(var t=0;t<_layout.length;t++)if(_layout[t].id==n)return _layout[t];return null}function checkLayout(n,t){var i,r;if(_layout.length>0)for(i=0;i<_layout.length;i++)if(_layout[i].shape==null){if(n>=_layout[i].x&&n<_layout[i].x+_layout[i].width&&t>=_layout[i].y&&t<_layout[i].y+_layout[i].height)return _layout[i].id}else{if(_context.beginPath(),_layout[i].shape=="circle")_context.arc(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[1],_layout[i].coords[2],0,Math.PI*2,!1);else if(_layout[i].shape=="poly"){for(_context.moveTo(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[1]),r=2;r<_layout[i].coords.length-1;r+=2)_context.lineTo(_layout[i].x+_layout[i].coords[r],_layout[i].y+_layout[i].coords[r+1]);_context.closePath()}else _layout[i].shape=="rect"&&(_context.moveTo(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[1]),_context.lineTo(_layout[i].x+_layout[i].coords[2],_layout[i].y+_layout[i].coords[1]),_context.lineTo(_layout[i].x+_layout[i].coords[2],_layout[i].y+_layout[i].coords[3]),_context.lineTo(_layout[i].x+_layout[i].coords[0],_layout[i].y+_layout[i].coords[3]),_context.closePath());if(_context.isPointInPath(n,t))return _layout[i].id}return-1}function getLayoutState(){for(var i=0,t,n=0;n<_touch_x.length;n++)t=checkLayout(_touch_x[n],_touch_y[n]),t>=0&&(i|=1<<t);return i}function layoutBit(n){return 1<<n}function _getMouse(n){_mouse_x=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-_getLeft(_canvas);_mouse_y=n.clientY+document.body.scrollTop+document.documentElement.scrollTop-_getTop(_canvas)}function _onMouseDown(n){if(_getMouse(n),_use_layout&&_layout.length>0){var t=checkLayout(_mouse_x,_mouse_y);if(t>=0){processEvent(6,t);return}}processEvent(8,0)}function _onMouseMove(n){_getMouse(n);processEvent(9,0)}function _onMouseOut(n){_getMouse(n);processEvent(10,0)}function _onMouseOver(n){_getMouse(n);processEvent(11,0)}function _onMouseUp(n){if(_getMouse(n),_use_layout&&_layout.length>0){var t=checkLayout(_mouse_x,_mouse_y);if(t>=0){processEvent(7,t);return}}processEvent(12,0)}function getMouseX(){return _mouse_x}function getMouseY(){return _mouse_y}function _getTouch(n){_touch_x=[];_touch_y=[];for(var t=0;t<n.touches.length;t++)_touch_x[t]=n.touches[t].pageX-_getLeft(_canvas),_touch_y[t]=n.touches[t].pageY-_getTop(_canvas)}function _onTouchStart(n){if(_getTouch(n),_touch_x0=_touch_x[0],_touch_y0=_touch_y[0],_touch_x0>=0&&_touch_x0<getWidth()&&_touch_y0>=0&&_touch_y0<getHeight()){if(_touch_start=!0,_use_layout&&_layout.length>0){var t=checkLayout(_touch_x0,_touch_y0);if(t>=0){processEvent(6,t);n.preventDefault();return}}processEvent(15,0);n.preventDefault()}}function _onTouchMove(n){_touch_start&&(_getTouch(n),_touch_x0=_touch_x[0],_touch_y0=_touch_y[0],processEvent(16,0),n.preventDefault())}function _onTouchEnd(n){if(_touch_start){if(_touch_start=!1,_getTouch(n),_use_layout&&_layout.length>0){var t=checkLayout(_touch_x0,_touch_y0);if(t>=0){processEvent(7,t);n.preventDefault();return}}processEvent(17,0);n.preventDefault()}}function touchNum(){return _touch_x.length}function getTouchX(n){return n<_touch_x.length?_touch_x[n]:_touch_x0}function getTouchY(n){return n<_touch_y.length?_touch_y[n]:_touch_y0}function launch(n){location.replace(n)}function setFont(n,t){_font_size=n;_font_family=t.indexOf(" ")>=0?"'"+t+"'":t;_text.style.cssText=_text_style+";font:"+_font_size+"px "+_font_family}function stringWidth(n){_text.innerHTML="'";var t=_text.offsetWidth;return n=n.replace(new RegExp("<","igm"),"&lt;"),n=n.replace(new RegExp(">","igm"),"&gt;"),_text.innerHTML="'"+n+"'",_text.offsetWidth-t*2}function fontHeight(){return _font_size}function _drawStringEx(n,t,i){_lock||(_stringex_num>=_stringex.length&&(_stringex[_stringex_num]=document.createElement("span"),_stringex[_stringex_num].style.cssText="position:absolute",document.body.appendChild(_stringex[_stringex_num]),_USE_MOUSE&&(_addEventListener(_stringex[_stringex_num],"mousedown",_onMouseDown),_addEventListener(_stringex[_stringex_num],"mousemove",_onMouseMove),_addEventListener(_stringex[_stringex_num],"mouseup",_onMouseUp))),_stringex[_stringex_num].style.cssText="position:absolute;left:"+(_getLeft(_canvas)+t)+"px;top:"+(_getTop(_canvas)+i-_font_size)+"px;color:"+_color+";font:"+_font_size+"px "+_font_family,n=n.replace(new RegExp("<","igm"),"&lt;"),n=n.replace(new RegExp(">","igm"),"&gt;"),_stringex[_stringex_num].innerHTML=n,_stringex_num++)}function _INT(n){return _Math.int(n)}function _DIV(n,t){return _Math.div(n,t)}function _MOD(n,t){return _Math.mod(n,t)}function _Random(){}function _ScalableGraphics(){this.f=0;this.s=1}function _Vector(n){this.o=new Array(n);this.n=0}function Enemy(n,t,i,r,u,f){if(this._type=0,this._attack=0,this._w=0,i<4)this._type=0,this._attack=i,this._w=32;else switch(_DIV(i-4,4)){case 0:this._type=1;this._attack=4;this._w=26;break;case 1:this._type=2;this._attack=5;this._w=34;break;case 2:this._type=3;this._attack=5;this._w=26;break;case 3:this._type=4;this._attack=6;this._w=32;break;case 4:this._type=5;this._attack=6;this._w=34;break;case 5:this._type=6;this._attack=7;this._w=26}this._x=n;this._y=t;this._elapse=0;this._col=-1;this._tx=0;this._ty=0;this._sx=0;this._sy=0;this._interval=r;this._shed=u;this._damage=0;this.m_damage=f;this._direction=0;this._pattern=0;switch(this._type){case 1:case 2:case 3:switch(_MOD(i-4,4)){case 0:this._direction=0;this._pattern=0;break;case 1:this._direction=1;this._pattern=4;break;case 2:this._direction=2;this._pattern=4;break;case 3:this._direction=3;this._pattern=0}break;case 5:this._pattern=0;switch(_MOD(i-4,4)){case 0:this._direction=4;break;case 1:this._direction=5;break;case 2:this._direction=6;break;case 3:this._direction=7}break;case 6:this._pattern=0}this._show=!1}function stage_init(){var n;for(base_data=new Array(41),n=0;n<41;n++)base_data[n]=new Array(41);enemy=new _Vector(128);_attack=-1}function stage_load(){var t,i,r,n;chip=1;line=1;base=1;bg_image=-1;dark=!1;switch(st_index){case 0:base_image=RES_IMAGE_BASE0;chip=10;line=2;base=chip*line;r=new StageData0;break;case 1:base_image=RES_IMAGE_BASE1;chip=12;line=2;base=chip*line;bg_image=RES_IMAGE_BACK1;r=new StageData1;break;case 2:base_image=RES_IMAGE_BASE2;dark=!0;chip=12;line=2;base=chip*line;r=new StageData2;break;case 3:base_image=RES_IMAGE_BASE3;chip=7;line=1;base=chip*line;r=new StageData3;break;case 4:base_image=RES_IMAGE_BASE4;chip=13;line=2;base=chip*line;r=new StageData4;break;case 5:base_image=RES_IMAGE_BASE5;chip=12;line=10;base=chip*line;bg_image=RES_IMAGE_BACK5;r=new StageData5}for(t=0;t<40;t++)for(i=0;i<40;i++)base_data[i][t]=r.MAP[t][i];for(enemy.removeAllElements(),enemy_size=0,n=new Array(7),i=0;;i++){for(t=0;t<7;t++)n[t]=r.ENEMY[i][t];if(n[0]==-1)break;n[1]*=24;n[2]*=24;n[6]<10&&(n[6]*=30);switch(n[0]){case 0:_MOD(level,2)==1&&(n[4]=n[3]<4?_DIV(n[4]*2,3):_DIV(n[4],2),n[5]%=n[4]);enemy.addElement(new Enemy(n[1],n[2],n[3],n[4],n[5],n[6]));break;case 1:_MOD(level,2)==0&&enemy.addElement(new Enemy(n[1],n[2],n[3],n[4],n[5],n[6]));break;case 2:_MOD(level,2)==1&&enemy.addElement(new Enemy(n[1],n[2],n[3],n[4],n[5],n[6]))}}enemy_size=enemy.size()}function stage_create(){st_index>5&&new_level();stage_load();jiki_load_image();attack_x=-1;pattern=0}function stage_update(n){for(var i,t=enemy_size-1;t>=0;t--)i=enemy.elementAt(t),i.update(n);n||(pattern++,pattern>1&&(pattern=0))}function stage_attack(){var h,c,s,l,a;if(!(t_damage>=m_damage)){var f=!1,t,u,i=jiki_x+12,r=jiki_y+12,e,o,n;if(u=-1,level<4||level>5){for(s=9216,t=enemy_size-1;t>=0;t--)n=enemy.elementAt(t),n._damage<n.m_damage&&(e=n._x+12,o=n._y+12,h=i-e,c=r-o,l=h*h+c*c,l<=s&&(stage_kabe12l(_DIV(e,12),_DIV(o,12),_DIV(i,12),_DIV(r,12))||(u=t,s=l)));u>=0&&(n=enemy.elementAt(u),level<4?setCMYColor(_MOD(_elapse,3)):s<=1024?g.setColor(COLOR_W):s<=4096?g.setColor(COLOR_Y):g.setColor(COLOR_M),attack_x=n._x+12+rand.next(9),attack_y=n._y+12+rand.next(9),attack_x>=0&&(boost?(attack_x1=i+_DIV(attack_x-i,3)+rand.next(9),attack_y1=r+_DIV(attack_y-r,3)+rand.next(9),attack_x2=attack_x-_DIV(attack_x-i,3)+rand.next(9),attack_y2=attack_y-_DIV(attack_y-r,3)+rand.next(9),drawLine(i,r,attack_x1,attack_y1),drawLine(attack_x1,attack_y1,attack_x2,attack_y2),drawLine(attack_x2,attack_y2,attack_x,attack_y)):drawLine(i,r,attack_x,attack_y)),level<4?(n._damage+=boost?2:1,n._damage>=n.m_damage&&(n._elapse=0),f=!0):s<=1024?(n._damage+=boost?6:3,n._damage>=n.m_damage&&(n._elapse=0),f=!0):s<=4096?(n._damage+=boost?4:2,n._damage>=n.m_damage&&(n._elapse=0),f=!0):(n._damage+=boost?2:1,n._damage>=n.m_damage&&(n._elapse=0),f=!0),n._damage>=n.m_damage&&add_score(n.m_damage*10))}else if(boost)for(t=enemy_size-1;t>=0;t--)n=enemy.elementAt(t),n._damage<n.m_damage&&n._show&&(e=n._x+12,o=n._y+12,stage_kabe12l(_DIV(e,12),_DIV(o,12),_DIV(i,12),_DIV(r,12))||(setCMYColor(_MOD(_elapse,3)),attack_x=rand.next(9),attack_y=rand.next(9),drawLine(i,r,n._x+12+attack_x,n._y+12+attack_y),n._damage+=1,n._damage>=n.m_damage&&(n._elapse=0),f=!0,n._damage>=n.m_damage&&add_score(n.m_damage*10)));else{for(a=0;a<2;a++){for(t=_attack+1;t<enemy_size;t++)if(n=enemy.elementAt(t),n._damage<n.m_damage&&n._show&&(e=n._x+12,o=n._y+12,!stage_kabe12l(_DIV(e,12),_DIV(o,12),_DIV(i,12),_DIV(r,12)))){u=t;break}if(u>=0){_attack=u;break}_attack=-1}u>=0&&(n=enemy.elementAt(u),setCMYColor(_MOD(_elapse,3)),attack_x=rand.next(9),attack_y=rand.next(9),drawLine(i,r,n._x+12+attack_x,n._y+12+attack_y),n._damage+=1,n._damage>=n.m_damage&&(n._elapse=0),f=!0,n._damage>=n.m_damage&&add_score(n.m_damage*10))}f&&play_sound(6)}}function stage_destroyed(){for(var t,n=enemy_size-1;n>=0;n--)if(t=enemy.elementAt(n),t._type==0&&t._damage<t.m_damage)return!1;return!0}function stage_hit(n,t){if(n<0||n>936||t<0||t>936)return 4;for(var s=_DIV(n+12,24),h=_DIV(t+12,24),i=_DIV(n,24),r=_DIV(t,24),f=i+1,e=r+1,c=!1,u,o=enemy_size-1;o>=0;o--)if(u=enemy.elementAt(o),u._damage>=u.m_damage)(u._type==0||u._type==4)&&_DIV(u._x,24)==s&&_DIV(u._y,24)==h&&(c=!0);else if((n!=u._x||t!=u._y)&&Math.abs(u._x-n)<24&&Math.abs(u._y-t)<24)return 4;if((n!=jiki_x||t!=jiki_y)&&Math.abs(jiki_x-n)<24&&Math.abs(jiki_y-t)<24)return 4;if(_MOD(n,24)!=0&&_MOD(t,24)!=0){if(_DIV(base_data[i][r],base)==4||_DIV(base_data[i][e],base)==4||_DIV(base_data[f][r],base)==4||_DIV(base_data[f][e],base)==4||_DIV(base_data[i][r],base)==3||_DIV(base_data[i][e],base)==3||_DIV(base_data[f][r],base)==3||_DIV(base_data[f][e],base)==3)return 4}else if(_MOD(n,24)!=0){if(_DIV(base_data[i][r],base)==4||_DIV(base_data[f][r],base)==4||_DIV(base_data[i][r],base)==3||_DIV(base_data[f][r],base)==3)return 4}else if(_MOD(t,24)!=0&&(_DIV(base_data[i][r],base)==4||_DIV(base_data[i][e],base)==4||_DIV(base_data[i][r],base)==3||_DIV(base_data[i][e],base)==3))return 4;return c?1:_DIV(base_data[s][h],base)}function stage_spear(){for(var n,t=enemy_size-1;t>=0;t--)if(n=enemy.elementAt(t),n._damage<n.m_damage&&n._type==6&&n._sx>=jiki_x&&n._sx<jiki_x+24&&n._sy>=jiki_y&&n._sy<jiki_y+24)return!0;return!1}function stage_kabe12l(n,t,i,r){var f,u,s,h,e,o,c,l;if(c=i>n?1:-1,e=i>n?i-n:n-i,l=r>t?1:-1,o=r>t?r-t:t-r,s=n,h=t,e>=o)for(u=-e,f=0;f<=e;f++){if(_DIV(base_data[_DIV(s,2)][_DIV(h,2)],base)==4)return!0;s+=c;u+=2*o;u>=0&&(h+=l,u-=2*e)}else for(u=-o,f=0;f<=o;f++){if(_DIV(base_data[_DIV(s,2)][_DIV(h,2)],base)==4)return!0;h+=l;u+=2*e;u>=0&&(s+=c,u-=2*o)}return!1}function stage_baku(n,t,i,r){var u;r==1&&(i>26?play_sound(3):play_sound(2));u=_DIV(r,4);u>=0&&u<5&&drawScaledImage(main_img[RES_IMAGE_BAKU],n+u*2,t+u*2,24-u*4,24-u*4,0,0,24,24);i>26&&(u==0&&(quake=15),u=_DIV(r-2,4),u>=0&&u<5&&drawScaledImage(main_img[RES_IMAGE_BAKU],n-6+u*2,t-6+u*2,24-u*4,24-u*4,0,0,24,24),u=_DIV(r-4,4),u>=0&&u<5&&drawScaledImage(main_img[RES_IMAGE_BAKU],n+6+u*2,t-2+u*2,24-u*4,24-u*4,0,0,24,24),u=_DIV(r-6,4),u>=0&&u<5&&drawScaledImage(main_img[RES_IMAGE_BAKU],n+2+u*2,t+6+u*2,24-u*4,24-u*4,0,0,24,24))}function stage_draw(n){var i,f,e,o,s,r,u,t;if(_win_x=jiki_x-96,_win_y=jiki_y-96,_win_x<0?_win_x=0:_win_x+216>960&&(_win_x=744),_win_y<0?_win_y=0:_win_y+216>960&&(_win_y=744),!n&&dark&&setClip(_light_x-_win_x,_light_y-_win_y,120,120),quake>0?(r=quake_x,u=quake_y,setOrigin(12+r,12+u)):(r=0,u=0),bg_image>=0&&(f=_DIV(_win_x,3),e=_DIV(_win_y,3),o=240-f,s=240-e,o>0&&s>0&&g.drawScaledImage(main_img[bg_image],-f+origin_x,-e+origin_y,240,240,0,0,120,120),f>0&&s>0&&g.drawScaledImage(main_img[bg_image],o+origin_x,-e+origin_y,240,240,0,0,120,120),o>0&&e>0&&g.drawScaledImage(main_img[bg_image],-f+origin_x,s+origin_y,240,240,0,0,120,120),f>0&&e>0&&g.drawScaledImage(main_img[bg_image],o+origin_x,s+origin_y,240,240,0,0,120,120)),drawScaledImage(main_img[base_image],0,0,960,960,0,0,480,480),quake>0&&setOrigin(12,12),!n){for(i=enemy_size-1;i>=0;i--)if(t=enemy.elementAt(i),t._damage>=t.m_damage)(t._type==0||t._type==4)&&drawImage(main_img[RES_IMAGE_ENEMY_03],t._x-4+r,t._y-4+u,32,32);else switch(t._type){case 0:t._show=t._attack==3?drawImage(main_img[RES_IMAGE_ENEMY_00+_MOD(_elapse,3)],t._x+r,t._y+u,32,32):drawImage(main_img[RES_IMAGE_ENEMY_00+t._attack],t._x+r,t._y+u,32,32);break;case 4:t._show=drawImage(main_img[RES_IMAGE_ENEMY_40+_MOD(_elapse,3)],t._x-4+r,t._y-4+u,t._w,t._w);break;case 1:t._show=drawImage(main_img[RES_IMAGE_ENEMY_10+pattern*2+_DIV(t._pattern,4)],t._x,t._y,t._w,t._w);break;case 2:t._show=drawImage(main_img[RES_IMAGE_ENEMY_20+pattern*5+t._pattern],t._x-4,t._y-4,t._w,t._w);break;case 3:t._show=drawImage(main_img[RES_IMAGE_ENEMY_30+pattern*5+t._pattern],t._x,t._y,t._w,t._w);break;case 5:t._show=drawImage(main_img[RES_IMAGE_ENEMY_50],t._x-4,t._y-4,t._w,t._w);break;case 6:t._show=drawImage(main_img[RES_IMAGE_ENEMY_60],t._x,t._y,t._w,t._w)}for(dark&&(drawScaledImage(main_img[RES_IMAGE_LIGHT],_light_x-200,_light_y-200,520,520,0,0,260,260),setClip(0,0,216,216)),i=enemy_size-1;i>=0;i--)if(t=enemy.elementAt(i),t._damage>=t.m_damage)stage_baku(t._x,t._y,t._w,t._elapse);else if(dark)switch(t._type){case 0:t._show=t._attack==3?drawImage(main_img[RES_IMAGE_ENEMYD_00+_MOD(_elapse,3)],t._x+r,t._y+u,32,32):drawImage(main_img[RES_IMAGE_ENEMYD_00+t._attack],t._x+r,t._y+u,32,32);break;case 4:t._show=drawImage(main_img[RES_IMAGE_ENEMYD_40+_MOD(_elapse,3)],t._x-4+r,t._y-4+u,t._w,t._w);break;case 1:t._show=drawImage(main_img[RES_IMAGE_ENEMYD_10+_DIV(t._pattern,4)],t._x,t._y,t._w,t._w);break;case 2:t._show=drawImage(main_img[RES_IMAGE_ENEMYD_20],t._x-4,t._y-4,t._w,t._w);break;case 3:t._show=drawImage(main_img[RES_IMAGE_ENEMYD_30+t._pattern],t._x,t._y,t._w,t._w);break;case 5:t._show=drawImage(main_img[RES_IMAGE_ENEMYD_50],t._x-4,t._y-4,t._w,t._w);break;case 6:t._show=drawImage(main_img[RES_IMAGE_ENEMYD_60],t._x,t._y,t._w,t._w)}for(setCMYColor(_MOD(_elapse,3)),i=enemy_size-1;i>=0;i--)t=enemy.elementAt(i),t._damage<t.m_damage&&t._type==6&&t._show&&drawLine(t._x+12,t._y+12,t._sx,t._sy)}}function stage_draw_map(n,t){var r,i;for(g.setColor(COLOR_W),g.drawRect(n,t,63,63),n+=2,t+=2,g.drawRect(n+_DIV(jiki_x,16),t+_DIV(jiki_y,16),1,1),setCMYColor(_MOD(_elapse,3)),r=enemy_size-1;r>=0;r--)i=enemy.elementAt(r),i._type==0&&i._damage<i.m_damage&&g.drawRect(n+_DIV(i._x,16),t+_DIV(i._y,16),1,1)}function Ring(n,t,i){this._x=n;this._y=t;this._col=i;this._elapse=0}function Shot(n,t,i,r){this._x0=n;this._y0=t;this._x1=i;this._y1=r;this._x=this._x0;this._y=this._y0;this._elapse=0;this._col=-1}function StageData0(){this.MAP=[[15,11,11,11,11,11,95,15,84,81,35,31,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,84,81,15,11,11,11,11,11,11,11,89,89],[13,0,0,0,0,0,96,13,10,11,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,11,12,89,94,14,0,94,89,14,89,89],[13,0,90,93,14,0,95,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,0,0,0,89,96,13,0,96,89,13,89,89],[13,0,84,81,13,0,95,13,80,81,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,20,88,89,14,89,95,13,0,95,89,13,10,11],[13,0,10,11,12,0,96,13,94,82,84,81,80,81,84,81,88,14,0,80,81,80,81,89,80,81,89,14,10,94,13,89,96,13,0,96,89,13,0,0],[13,0,0,0,0,0,95,13,96,83,88,80,81,89,80,81,15,12,0,10,88,84,81,80,81,89,88,86,14,96,13,89,97,13,0,97,89,13,89,14],[89,94,14,0,90,93,95,13,95,82,15,11,11,11,11,11,12,1,1,1,10,11,11,11,11,31,31,83,13,95,13,10,11,12,0,10,11,12,89,13],[88,97,13,0,89,88,96,13,95,83,13,0,2,2,2,0,2,2,2,0,2,2,2,4,5,6,24,82,13,95,89,89,89,89,89,89,89,89,89,13],[15,11,12,0,10,11,95,13,96,89,13,5,0,3,3,3,3,3,3,3,3,3,3,4,5,6,4,83,13,96,89,89,89,89,89,89,89,89,89,13],[13,0,0,0,0,0,95,13,95,88,13,5,6,86,89,80,81,84,81,89,80,81,86,14,0,0,0,88,13,95,15,11,11,11,11,11,11,11,89,13],[13,0,80,81,14,0,96,13,95,82,13,5,6,83,94,90,91,92,91,92,93,94,83,13,5,6,4,89,13,95,13,89,94,14,0,94,89,14,89,13],[13,0,90,93,13,0,95,13,96,83,13,0,6,82,95,94,90,92,91,92,93,97,82,13,5,6,4,82,13,96,13,89,96,13,0,96,89,13,10,12],[13,0,10,11,12,0,97,13,95,88,13,5,6,83,96,96,82,89,80,81,89,88,83,13,5,6,4,83,13,95,13,89,95,13,0,95,89,13,0,0],[13,0,0,0,0,0,10,12,95,82,13,5,6,89,97,97,83,88,15,11,11,31,31,32,1,1,1,86,13,95,13,89,96,13,0,96,89,13,89,89],[92,91,91,92,91,91,92,93,97,87,13,5,6,82,90,93,80,85,13,2,2,0,22,2,2,0,2,83,13,96,13,89,97,13,0,97,89,13,89,89],[81,88,89,80,81,84,81,89,80,81,13,0,6,83,89,88,80,81,13,3,3,0,3,3,3,0,3,82,13,97,13,10,11,12,0,10,11,12,89,89],[11,11,31,31,31,11,11,11,11,11,12,1,1,10,11,11,31,31,32,1,1,0,1,1,1,0,21,87,13,90,91,92,91,91,92,91,91,92,91,91],[2,0,2,22,2,0,2,2,2,0,22,22,2,0,2,2,2,20,2,2,2,0,84,81,80,81,88,89,13,10,11,11,11,11,11,11,11,11,11,11],[3,0,3,3,3,0,3,3,3,20,23,23,3,0,3,3,3,0,3,3,3,0,82,80,81,80,81,84,81,88,80,81,89,82,80,81,88,84,81,14],[1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,83,89,88,15,11,11,11,11,11,11,80,81,87,15,11,11,11,12],[2,0,2,2,2,0,2,22,2,0,2,2,2,0,22,2,2,0,2,2,2,0,82,82,86,13,88,80,81,89,88,14,10,11,11,12,80,81,80,85],[3,3,3,3,3,3,23,23,23,3,3,3,3,23,23,23,3,3,3,3,3,3,87,83,83,33,10,84,81,88,80,81,84,81,88,80,81,89,80,81],[0,89,88,14,0,82,80,81,34,0,0,6,82,89,88,88,88,80,81,14,0,6,89,88,15,12,0,10,11,11,11,11,11,11,11,11,11,11,11,11],[0,80,81,13,0,87,88,89,33,26,4,6,83,82,88,89,88,88,89,13,5,6,82,88,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,80,85,13,0,10,11,11,32,6,4,6,82,83,15,11,11,11,11,12,5,6,83,82,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,10,11,12,0,0,0,0,4,6,4,6,87,82,13,82,84,81,14,4,5,6,88,87,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,80,81,86,14,0,0,6,88,83,13,83,82,82,88,14,0,6,89,88,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,89,88,14,0,80,81,83,13,6,4,26,82,82,13,89,83,83,82,13,5,6,80,81,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,80,81,13,0,89,88,88,13,6,24,26,83,87,13,10,88,88,83,13,5,6,82,89,13,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,88,88,13,0,10,11,11,12,6,4,26,88,82,13,0,10,11,11,12,5,6,83,82,13,2,2,2,0,2,2,2,0,2,2,2,0,2,2,2],[0,10,11,12,0,0,0,0,4,0,0,6,89,83,13,84,81,82,14,4,0,6,88,83,13,3,3,3,0,3,3,3,0,3,3,3,0,3,3,3],[0,0,0,0,0,0,84,81,14,6,4,6,82,88,13,88,88,83,89,14,5,6,82,86,13,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1],[0,82,80,81,14,0,82,82,13,6,4,6,83,89,13,80,81,88,82,13,5,6,87,83,13,2,2,2,0,2,2,2,0,2,2,2,0,2,2,2],[0,87,88,89,13,0,83,87,13,6,4,6,86,88,13,10,89,88,83,13,5,6,82,88,13,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[0,10,11,11,12,0,88,82,13,0,0,6,83,82,13,0,10,11,11,12,0,6,83,89,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,86,83,13,6,4,6,89,83,13,86,88,89,14,4,5,6,88,82,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,80,81,86,14,0,83,88,80,81,88,84,81,82,13,83,80,81,88,14,5,6,82,83,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,89,88,83,13,0,10,84,81,80,81,80,81,87,13,89,82,88,89,13,5,6,83,88,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,88,80,81,13,0,0,10,11,11,11,11,11,11,12,88,83,84,81,13,0,6,89,82,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,10,11,11,12,0,84,81,80,85,88,89,88,14,0,10,11,11,11,12,5,6,88,87,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.ENEMY=[[0,0,17,6,80,0,1],[0,2,18,6,80,0,1],[0,0,19,6,80,0,1],[0,2,20,6,80,0,1],[0,0,21,6,80,0,1],[0,11,17,6,80,0,1],[0,13,18,6,80,0,1],[0,11,19,6,80,0,1],[0,13,20,6,80,0,1],[0,11,21,6,80,0,1],[0,23,6,4,80,0,1],[0,24,8,4,80,0,1],[0,25,6,4,80,0,1],[0,26,8,4,80,0,1],[0,14,24,14,80,20,1],[0,14,29,14,80,20,1],[0,14,34,14,80,20,1],[0,21,24,12,80,20,1],[0,0,22,8,80,0,2],[0,4,22,8,80,20,2],[0,8,22,8,80,0,2],[0,0,26,10,80,20,2],[0,0,30,10,80,0,2],[0,0,34,8,80,20,2],[0,10,6,10,80,0,2],[0,18,13,10,80,20,2],[0,4,1,10,80,0,2],[0,1,4,9,80,20,2],[0,1,9,9,80,0,2],[0,4,12,10,80,20,2],[0,33,5,8,80,0,2],[0,34,5,11,80,20,2],[0,33,10,8,80,0,2],[0,34,10,11,80,20,2],[0,25,22,10,80,0,2],[0,39,22,8,80,20,2],[0,39,39,9,80,0,2],[0,25,39,10,80,20,2],[0,38,27,16,80,0,4],[0,38,34,16,80,40,4],[0,1,1,0,120,0,4],[0,4,4,1,120,40,4],[0,4,9,1,120,0,4],[0,1,12,2,120,40,4],[0,10,0,0,120,0,4],[0,10,3,1,120,40,4],[0,27,0,1,120,40,4],[0,27,3,2,120,80,4],[0,16,5,0,120,0,4],[0,19,5,2,120,40,4],[0,8,35,1,120,0,4],[0,11,35,2,120,40,4],[0,33,1,0,120,0,4],[0,34,1,1,120,40,4],[0,33,14,1,120,40,4],[0,34,14,2,120,0,4],[1,37,27,1,120,0,4],[1,37,34,0,120,30,4],[1,39,27,0,120,60,4],[1,39,34,2,120,90,4],[2,37,27,1,80,0,4],[2,37,34,0,80,20,4],[2,39,27,0,80,40,4],[2,39,34,2,80,60,4],[-1,0,0,0,0,0,0]]}function StageData1(){this.MAP=[[48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,8,5,81,72,104,105,72],[48,75,83,83,83,83,83,83,112,113,100,101,112,113,112,113,83,83,83,112,113,83,100,101,83,83,83,83,112,113,112,113,76,0,5,81,72,106,107,72],[48,81,72,82,25,72,72,77,114,115,102,103,114,115,114,115,78,72,77,114,115,84,102,103,84,84,78,77,114,115,114,115,74,0,5,73,84,84,84,78],[48,81,72,82,48,81,104,97,0,0,0,0,0,0,0,0,96,105,82,0,1,4,4,4,4,0,96,97,0,1,4,4,4,13,14,4,4,4,4,81],[48,81,72,82,48,81,106,99,0,0,0,0,0,0,0,0,98,107,82,0,5,25,72,24,0,5,98,99,0,16,0,0,0,0,0,0,0,8,5,81],[48,81,72,82,48,81,72,82,0,0,0,0,0,0,0,0,81,77,74,0,5,75,83,76,0,5,108,109,0,5,0,0,0,0,0,0,0,0,5,81],[48,73,84,25,48,73,104,97,0,0,0,0,0,0,0,0,81,82,0,0,5,81,77,74,0,5,110,111,0,5,0,87,0,0,0,87,0,0,5,81],[48,48,48,48,48,25,106,99,0,0,0,0,0,0,0,0,81,82,0,0,5,81,82,0,0,5,108,109,0,87,0,89,0,87,0,89,0,87,0,81],[48,24,83,76,48,75,116,109,0,0,0,0,0,0,0,0,81,82,0,0,5,81,82,0,0,5,110,111,0,89,0,89,0,89,0,89,0,89,0,81],[48,81,72,82,48,81,118,111,0,0,0,4,4,0,0,0,81,82,0,0,5,81,82,0,0,5,96,97,0,89,0,89,0,89,0,89,0,89,0,81],[48,81,72,82,48,81,72,79,83,83,76,8,9,75,83,83,80,82,0,0,5,81,82,0,0,5,98,99,0,88,0,89,0,88,0,89,0,88,0,81],[48,81,72,82,48,81,104,105,116,117,82,0,5,73,84,84,84,74,0,0,5,81,82,0,0,5,96,97,0,5,0,88,0,0,0,88,0,0,5,81],[24,81,72,82,48,81,106,107,118,119,82,0,3,4,4,25,72,24,4,13,75,80,82,0,0,5,98,99,0,5,0,0,0,0,0,0,0,0,5,81],[84,84,84,24,48,73,84,84,84,78,82,0,0,0,0,0,0,0,0,0,81,72,79,76,25,5,108,109,4,14,4,4,4,4,4,4,4,13,2,81],[48,48,48,48,48,48,48,48,48,81,82,0,0,0,0,0,0,75,83,83,80,72,72,82,72,5,110,111,0,0,0,0,0,8,9,0,0,0,0,81],[83,83,83,76,48,75,83,76,48,81,79,83,112,113,83,83,83,80,77,84,84,84,84,74,24,5,81,79,112,113,100,101,76,0,5,75,112,113,83,80],[25,72,72,82,48,81,72,82,48,81,72,72,118,119,72,116,117,72,82,0,1,4,4,4,4,5,73,84,114,115,102,103,74,0,5,81,118,119,72,72],[48,81,72,82,48,81,72,82,48,81,72,104,105,72,72,118,119,104,97,0,5,0,0,0,8,5,0,0,0,0,0,0,0,6,5,81,72,72,72,72],[48,81,72,82,48,81,72,82,48,81,72,106,107,72,116,117,72,106,99,0,5,75,100,101,83,83,112,113,83,83,83,112,113,100,101,80,72,116,117,104],[48,81,72,72,25,81,72,82,48,81,72,84,84,84,114,115,84,84,74,13,14,73,102,103,84,84,114,115,84,84,84,114,115,102,103,84,84,114,115,102],[48,24,84,84,84,84,84,74,48,81,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,72,25,0,0,0,0,0,0,0,0],[48,48,48,48,48,48,48,48,48,81,25,25,85,90,90,90,86,0,0,85,90,90,90,86,0,0,85,90,90,90,86,0,0,85,90,90,90,86,0,0],[48,75,83,25,48,75,83,83,83,80,72,24,0,0,0,0,0,0,0,4,4,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4],[48,81,72,82,48,81,72,72,72,72,112,113,100,101,83,100,101,83,76,8,9,75,83,112,113,76,8,9,75,83,83,112,113,76,8,9,75,83,76,0],[48,81,72,82,48,73,84,84,84,84,114,115,102,103,84,102,103,84,74,0,5,73,78,118,119,79,76,0,73,78,72,118,119,79,76,0,81,104,97,0],[48,81,72,82,48,48,48,48,48,48,48,48,48,48,48,48,48,48,11,5,5,15,73,84,84,84,74,13,14,73,84,84,78,116,109,0,81,106,99,0],[48,81,72,79,83,83,83,83,83,83,83,100,101,83,83,112,113,76,8,5,5,16,24,72,25,4,0,0,0,0,0,0,81,118,111,0,81,116,109,0],[48,81,72,72,72,72,72,72,72,72,72,106,107,72,72,118,119,79,76,0,5,75,83,76,8,9,75,83,83,83,76,0,81,104,97,0,81,118,111,0],[48,73,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,74,0,5,73,78,82,0,5,81,104,105,77,74,0,81,106,99,0,73,78,82,0],[48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,11,5,5,15,73,74,13,14,73,102,103,74,13,14,73,84,74,13,14,73,74,0],[83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,76,8,5,5,25,72,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[72,72,116,117,72,72,72,116,117,104,105,72,104,105,116,117,72,79,76,0,5,75,112,113,83,83,112,113,100,101,83,83,83,112,113,83,83,100,101,83],[84,84,114,115,84,84,84,114,115,102,103,84,102,103,114,115,84,84,74,13,14,73,114,115,84,84,114,115,102,103,84,84,84,114,115,84,84,102,103,84],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[86,0,0,85,90,90,90,86,0,0,85,90,90,90,86,0,0,85,90,90,90,86,0,0,85,90,90,90,86,0,0,85,90,90,90,86,0,0,85,90],[4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4],[0,75,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,76,0],[0,73,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,74,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,4,4,4,4,11,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,76,12,0,8,9,0,8,75,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83]];this.ENEMY=[[0,0,35,6,80,20,1],[0,7,35,6,80,20,1],[0,14,35,6,80,20,1],[0,21,35,6,80,20,1],[0,28,35,6,80,20,1],[0,39,33,5,80,20,1],[0,32,33,5,80,20,1],[0,25,33,5,80,20,1],[0,18,33,5,80,20,1],[0,11,33,5,80,20,1],[0,0,7,12,80,20,1],[0,4,7,12,80,20,1],[0,0,14,12,80,40,1],[0,4,14,12,80,40,1],[0,8,14,12,80,40,1],[0,0,21,12,80,60,1],[0,4,21,12,80,60,1],[0,8,21,12,80,60,1],[0,29,5,12,80,0,1],[0,31,4,12,80,0,1],[0,35,4,12,80,0,1],[0,37,5,12,80,0,1],[0,29,12,12,80,0,1],[0,31,13,12,80,0,1],[0,35,13,12,80,0,1],[0,37,12,12,80,0,1],[0,8,9,11,80,0,2],[0,11,3,9,80,20,2],[0,12,3,10,80,0,2],[0,15,9,11,80,20,2],[0,13,20,10,80,0,2],[0,20,20,10,80,20,2],[0,27,20,10,80,0,2],[0,34,20,10,80,20,2],[0,27,22,8,80,0,2],[0,35,22,8,80,20,2],[0,39,22,8,80,0,2],[0,39,30,9,80,20,2],[0,11,14,20,80,0,2],[0,18,6,20,80,20,2],[0,23,7,20,80,40,2],[0,4,3,3,120,0,4],[0,0,11,3,120,40,4],[0,0,17,3,120,0,4],[0,39,20,3,80,0,4],[0,11,6,3,80,0,4],[0,19,18,1,120,0,4],[0,20,18,2,120,40,4],[0,19,31,0,120,0,4],[0,20,31,1,120,40,4],[1,29,4,0,120,0,4],[1,29,13,1,120,30,4],[1,37,4,1,120,60,4],[1,37,13,2,120,90,4],[2,29,4,0,80,0,4],[2,29,13,1,80,20,4],[2,37,4,1,80,40,4],[2,37,13,2,80,60,4],[-1,0,0,0,0,0,0]]}function StageData2(){this.MAP=[[0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,100,1,1,1,1,1,1,1,1,1,1,101,102,102,102,102,102,106],[0,0,0,0,0,0,0,100,1,1,96,97,98,1,1,99,0,0,0,0,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,99],[0,0,0,0,0,0,0,100,1,1,99,0,100,1,1,99,0,0,0,0,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,99],[0,0,0,0,0,0,0,100,1,1,101,102,103,1,1,99,0,0,0,0,107,102,103,1,1,1,96,97,97,98,1,1,1,96,97,98,1,1,1,99],[0,0,0,0,0,0,0,100,1,1,1,1,1,1,1,99,0,0,0,0,100,1,1,1,1,1,99,0,0,100,1,1,1,99,0,100,1,1,1,99],[0,0,0,0,0,0,0,105,98,1,1,96,97,97,97,104,0,0,107,102,103,1,1,1,1,1,99,0,0,105,97,97,97,104,0,100,1,1,1,99],[0,0,0,0,0,0,107,102,103,1,1,99,0,0,0,0,0,0,100,1,1,1,1,1,1,1,99,0,0,0,0,0,0,0,0,100,1,1,1,99],[102,102,102,102,106,0,100,1,1,1,1,101,102,102,106,0,0,0,100,1,1,1,1,96,97,97,104,0,0,0,0,0,0,0,0,100,1,1,1,99],[1,1,1,1,101,102,103,1,1,1,1,1,1,1,101,102,102,102,103,1,1,1,1,99,0,0,0,0,0,0,0,107,102,102,102,103,1,1,1,99],[1,1,1,1,1,96,98,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,101,0,106,0,0,0,0,0,100,1,1,1,1,1,1,1,101],[1,1,1,1,1,99,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,99,0,0,0,0,0,100,1,1,1,1,1,1,1,1],[1,1,1,1,1,99,100,1,1,1,96,98,1,1,1,1,1,1,96,97,98,1,1,1,1,99,0,0,0,0,0,105,98,1,1,1,1,1,1,1],[1,1,1,1,1,99,100,1,1,1,99,100,1,1,96,98,1,1,101,102,103,1,1,1,1,101,102,102,102,102,102,102,103,1,1,1,1,1,1,1],[1,1,1,1,1,99,100,1,1,1,99,100,1,1,101,103,1,1,1,1,1,1,1,1,1,1,1,96,97,97,97,97,98,1,1,1,1,1,1,1],[97,98,1,1,96,104,100,1,1,1,99,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,99,0,0,0,0,100,1,1,1,96,97,97,97],[0,100,1,1,99,0,0,0,97,97,104,105,98,1,1,1,1,1,1,96,98,1,1,1,96,97,97,104,0,0,0,0,100,1,1,1,99,0,0,0],[0,100,1,1,99,0,0,0,0,0,0,0,100,1,1,96,98,1,1,99,100,1,1,1,99,0,0,0,0,0,0,0,100,1,1,1,99,0,0,0],[102,103,1,1,101,106,0,0,0,0,0,0,100,1,1,101,103,1,1,101,103,1,1,1,101,0,106,0,0,0,0,0,100,1,1,1,101,102,102,102],[1,1,1,1,1,99,0,107,102,106,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,99,0,0,0,0,0,100,1,1,1,1,1,1,1],[1,1,1,1,1,99,0,100,1,99,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,101,102,102,102,102,102,103,1,1,1,1,1,1,1],[1,1,1,1,1,99,0,105,97,104,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,96,97,97,98,1,1,1,1,1,1,1],[1,1,1,1,1,99,0,0,0,0,0,0,100,1,1,1,96,97,97,97,97,97,98,1,1,1,1,1,1,99,0,0,105,97,97,97,97,98,1,1],[1,1,1,1,1,101,102,106,0,0,0,0,100,1,1,1,99,0,0,0,0,0,100,1,1,1,72,1,1,99,0,0,0,0,0,0,0,100,1,1],[1,1,1,1,1,1,1,99,0,0,0,0,100,1,1,1,99,0,0,0,0,0,100,1,1,1,99,0,97,104,0,0,0,107,102,102,102,103,1,1],[1,1,1,1,1,1,1,99,0,0,0,0,105,98,96,0,104,0,0,0,0,0,100,1,1,1,99,0,0,0,0,0,0,100,1,1,1,1,1,1],[98,1,1,1,1,1,1,99,0,0,0,0,0,100,99,0,0,0,0,107,102,102,103,1,1,1,101,102,106,0,0,0,0,100,1,1,1,1,1,1],[100,1,1,96,97,97,97,104,0,0,0,0,0,100,99,0,0,0,0,100,1,1,1,1,1,1,1,1,99,0,0,0,0,100,1,1,1,1,1,1],[100,1,1,99,0,0,0,0,0,0,0,0,0,100,99,0,0,0,0,100,1,1,1,1,1,1,1,1,99,0,0,0,0,100,1,1,1,1,1,1],[111,48,48,99,0,0,0,0,0,0,0,107,102,111,110,102,106,0,0,100,1,1,1,73,1,1,1,1,99,0,0,0,0,100,1,1,1,1,1,1],[48,48,48,110,102,106,0,0,0,0,0,100,48,48,48,48,99,0,0,105,97,97,0,100,96,97,97,97,104,0,0,0,0,105,97,98,1,1,1,96],[48,48,48,48,48,99,0,0,0,0,0,100,48,48,48,48,99,0,0,0,0,0,0,100,99,0,0,0,0,0,0,0,0,0,0,100,1,1,1,99],[48,48,48,48,48,99,0,102,102,102,102,111,48,48,48,48,99,0,0,0,0,0,0,100,99,0,0,0,0,0,0,0,0,0,0,100,1,1,1,99],[48,48,48,48,48,86,48,48,48,48,48,48,48,48,48,48,99,0,0,0,0,0,0,100,99,0,0,0,107,102,106,0,0,107,102,103,1,1,1,101],[48,48,48,48,48,48,48,48,48,48,48,48,48,108,97,97,104,0,0,0,0,0,107,103,99,0,0,0,100,1,99,0,0,100,1,1,1,1,1,1],[48,48,48,48,48,48,48,48,48,48,48,48,48,99,0,0,0,0,0,0,0,0,100,96,104,0,0,0,105,97,104,0,0,100,1,1,1,1,1,1],[48,48,48,48,48,48,48,48,48,48,48,48,48,99,0,0,0,0,0,0,0,0,100,99,0,0,0,0,0,0,0,0,0,100,1,1,1,1,1,1],[48,48,48,48,48,48,48,48,48,48,48,48,48,110,102,102,102,102,102,102,102,102,103,99,0,0,0,0,0,0,0,0,0,100,1,1,1,1,1,1],[97,97,97,97,97,97,97,109,48,48,48,48,48,48,48,108,97,97,98,1,1,1,1,101,102,102,102,102,102,102,102,102,102,103,1,1,1,1,1,1],[0,0,0,0,0,0,0,100,48,48,48,48,48,48,48,99,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,100,48,48,48,48,48,48,48,99,0,0,100,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];this.ENEMY=[[0,0,13,24,80,0,1],[0,2,13,24,80,0,1],[0,4,13,24,80,0,1],[0,0,18,24,80,0,1],[0,2,18,24,80,0,1],[0,4,18,24,80,0,1],[0,11,16,13,80,20,1],[0,11,18,13,80,20,1],[0,11,20,13,80,20,1],[0,11,22,13,80,20,1],[0,17,22,12,80,0,1],[0,19,22,12,80,0,1],[0,21,22,12,80,0,1],[0,36,5,12,80,20,1],[0,38,5,12,80,20,1],[0,33,14,12,80,0,1],[0,35,14,12,80,0,1],[0,34,24,12,80,20,1],[0,36,24,12,80,20,1],[0,38,24,12,80,20,1],[0,35,33,12,80,0,1],[0,37,33,12,80,0,1],[0,39,33,12,80,0,1],[0,8,0,8,80,20,2],[0,8,4,10,80,20,2],[0,14,0,9,80,20,2],[0,14,4,11,80,20,2],[0,16,13,9,80,60,2],[0,16,15,8,80,60,2],[0,18,13,11,80,60,2],[0,18,15,10,80,60,2],[0,23,0,10,80,20,2],[0,32,0,8,80,60,2],[0,1,1,3,80,0,4],[0,20,1,0,120,0,4],[0,16,6,1,120,40,4],[0,17,14,3,80,0,4],[0,21,27,1,120,0,4],[0,26,27,2,120,40,4],[0,31,0,0,120,0,4],[0,31,3,2,120,40,4],[0,29,10,3,80,0,4],[0,30,15,3,80,0,4],[0,26,31,0,120,0,4],[0,26,35,2,120,40,4],[0,31,31,1,120,40,4],[0,31,35,0,120,0,4],[0,0,36,3,80,0,4],[0,14,39,3,80,0,4],[0,15,29,3,80,0,4],[1,0,8,1,120,0,4],[1,0,9,2,120,30,4],[1,1,8,0,120,60,4],[1,1,9,1,120,90,4],[2,0,8,1,60,0,4],[2,0,9,2,60,20,4],[2,1,8,0,60,40,4],[2,1,9,1,60,0,4],[-1,0,0,0,0,0,0]]}function StageData3(){this.MAP=[[6,2,2,2,2,2,2,2,16,16,28,20,16,16,28,20,16,16,16,16,16,28,28,28,28,28,6,2,28,28,28,28,6,2,28,28,28,28,28,28],[4,0,0,0,0,0,0,0,28,19,28,18,28,19,28,18,28,28,28,28,19,28,28,28,28,28,4,0,28,28,28,28,4,0,28,28,28,28,28,28],[4,0,0,0,0,0,0,0,28,18,28,18,28,18,28,18,28,28,28,28,18,28,28,28,28,28,4,0,28,28,28,28,4,0,28,28,28,28,28,28],[4,0,0,0,0,0,0,0,28,18,28,18,28,18,28,18,28,28,20,16,17,28,28,6,2,2,3,0,1,2,2,2,3,0,1,2,2,28,28,28],[4,0,0,0,0,0,0,0,28,18,28,18,28,18,28,18,28,28,18,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[4,0,0,0,0,0,0,0,28,18,28,18,28,18,28,18,28,28,18,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[4,0,0,0,0,0,0,0,28,18,28,18,28,18,28,18,28,28,18,1,2,2,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2],[4,0,0,0,0,0,0,0,28,18,15,17,28,18,15,17,28,28,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[18,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,5,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[18,28,28,28,20,16,16,28,28,28,20,16,16,16,16,16,28,28,28,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[18,15,16,16,17,28,19,15,16,16,17,28,28,28,19,14,28,28,28,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[28,28,28,28,28,28,28,28,28,28,28,28,20,16,17,14,15,16,28,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[20,16,16,16,16,16,16,16,16,16,16,28,18,28,28,28,28,19,28,28,6,2,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2],[18,28,28,28,28,28,28,28,28,28,19,28,18,15,16,16,16,17,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[18,15,16,16,16,28,20,16,16,16,17,28,28,28,19,14,28,28,28,28,28,28,28,5,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[28,28,28,28,19,28,18,28,28,28,28,28,20,16,17,14,15,16,28,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[20,16,16,16,17,28,18,15,16,16,16,28,18,28,28,28,28,19,28,28,28,28,28,4,0,0,0,0,0,0,0,0,0,0,0,0,0,28,28,28],[18,28,28,28,28,28,28,28,28,28,19,28,18,15,16,16,16,17,28,28,28,28,28,28,28,28,5,0,28,28,28,28,5,0,28,28,28,28,28,28],[18,15,16,16,16,28,20,16,16,16,17,28,28,28,19,14,28,28,28,28,28,28,28,28,28,28,4,0,28,28,28,28,4,0,28,28,28,28,28,28],[28,28,28,28,19,28,18,28,28,28,28,28,20,16,17,14,15,16,28,20,16,16,16,16,28,28,4,0,28,28,28,28,4,0,28,28,20,16,16,16],[20,16,16,16,17,28,18,15,16,16,16,28,18,28,28,28,28,19,28,18,28,28,28,19,28,28,28,28,28,28,28,28,28,28,28,28,18,28,28,19],[18,28,28,28,28,28,28,28,28,28,19,28,18,15,16,16,16,17,28,18,28,28,20,17,28,28,28,28,28,28,28,28,28,28,28,28,18,28,28,18],[18,15,16,16,16,16,16,16,16,28,18,28,28,28,19,14,28,28,28,18,28,28,18,14,15,16,16,16,16,16,16,16,16,16,16,16,17,28,28,18],[28,28,28,28,28,28,28,28,19,28,18,28,28,20,17,14,15,28,28,18,15,28,18,28,28,28,28,28,28,28,28,28,28,28,28,19,14,28,28,18],[20,16,16,16,16,16,16,16,17,28,18,15,16,17,14,14,14,15,16,17,14,28,18,15,16,28,20,16,16,16,16,28,28,28,28,28,19,28,20,17],[18,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,19,28,18,14,14,28,18,28,28,28,19,15,16,28,20,16,17,28,18,28],[18,28,28,20,16,16,16,16,16,16,28,28,28,6,2,2,2,2,2,2,3,28,18,14,14,28,18,15,16,28,18,14,14,28,18,14,14,28,18,28],[18,15,28,18,14,14,14,14,28,19,28,28,28,4,0,0,0,0,0,0,0,28,18,14,14,28,18,14,14,28,18,14,14,28,18,14,14,28,18,28],[18,14,15,17,14,14,14,14,28,18,15,16,28,4,0,0,0,0,0,0,0,28,18,14,14,28,18,14,14,28,18,14,14,28,18,14,14,28,18,28],[18,28,28,28,28,28,28,28,28,18,14,14,28,4,0,0,0,0,0,0,0,28,28,28,19,28,18,14,14,28,18,14,14,28,18,14,14,28,18,15],[18,15,16,16,16,16,16,16,28,18,14,14,28,4,0,0,0,0,0,0,0,28,20,16,17,28,18,14,14,28,28,28,19,15,17,28,28,28,28,19],[28,28,28,28,28,28,28,19,28,18,14,14,28,4,0,0,0,0,0,0,0,28,18,28,28,28,28,28,19,28,28,28,28,28,28,28,28,28,28,18],[6,2,2,2,2,2,2,3,28,18,14,14,28,4,0,0,0,0,0,0,0,28,18,15,16,16,16,28,18,15,16,28,6,2,2,2,2,2,2,3],[4,0,0,0,0,0,0,0,28,28,28,19,28,4,0,0,0,0,0,0,0,28,18,14,14,14,14,28,18,14,14,28,4,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,28,20,16,17,28,28,28,28,28,28,28,28,28,28,18,14,14,14,14,28,18,14,14,28,4,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,28,18,28,28,28,28,28,20,16,16,16,16,28,28,28,28,28,28,19,28,18,14,14,28,4,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,28,18,15,16,16,16,28,18,28,28,28,19,15,16,16,16,16,16,17,28,18,14,14,28,4,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,28,18,14,14,14,14,28,18,15,16,28,18,14,28,28,28,28,28,28,28,28,28,19,28,4,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,28,18,14,14,14,14,28,28,28,19,28,18,14,28,28,28,20,16,16,16,16,28,18,28,4,0,0,0,0,0,0,0],[4,0,0,0,0,0,0,0,28,28,28,28,28,19,15,16,16,17,28,18,14,15,16,16,17,28,28,28,19,15,17,28,4,0,0,0,0,0,0,0]];this.ENEMY=[[0,9,0,4,80,0,1],[0,11,0,4,80,0,1],[0,13,0,4,80,0,1],[0,15,0,4,80,0,1],[0,0,14,6,80,0,1],[0,0,16,6,80,0,1],[0,0,18,6,80,0,1],[0,0,20,6,80,0,1],[0,6,14,6,80,0,1],[0,6,16,6,80,0,1],[0,6,18,6,80,0,1],[0,6,20,6,80,0,1],[0,0,10,6,80,20,1],[0,0,30,6,80,20,1],[0,10,24,6,80,20,1],[0,19,19,4,80,20,1],[0,38,24,4,80,20,1],[0,12,12,8,80,0,2],[0,17,16,8,80,0,2],[0,12,20,8,80,0,2],[0,5,27,8,80,0,2],[0,10,30,8,80,0,2],[0,11,37,8,80,0,2],[0,23,26,8,80,0,2],[0,24,33,8,80,0,2],[0,27,28,8,80,0,2],[0,29,34,8,80,0,2],[0,31,27,8,80,0,2],[0,35,27,8,80,0,2],[0,3,3,20,80,0,2],[0,4,35,20,80,0,2],[0,17,29,20,80,0,2],[0,36,35,20,80,0,2],[0,26,1,12,120,30,15],[0,27,1,12,120,30,15],[0,32,1,12,120,30,15],[0,33,1,12,120,30,15],[0,38,6,13,120,30,15],[0,38,7,13,120,30,15],[0,38,12,13,120,30,15],[0,38,13,13,120,30,15],[0,33,18,15,120,30,15],[0,32,18,15,120,30,15],[0,27,18,15,120,30,15],[0,26,18,15,120,30,15],[0,21,13,14,120,30,15],[0,21,12,14,120,30,15],[0,26,0,8,120,60,15],[0,27,0,8,120,60,15],[0,32,0,8,120,60,15],[0,33,0,8,120,60,15],[0,39,6,9,120,60,15],[0,39,7,9,120,60,15],[0,39,12,9,120,60,15],[0,39,13,9,120,60,15],[0,33,19,11,120,60,15],[0,32,19,11,120,60,15],[0,27,19,11,120,60,15],[0,26,19,11,120,60,15],[0,20,13,10,120,60,15],[0,20,12,10,120,60,15],[0,4,4,3,80,0,4],[0,3,36,3,80,0,4],[0,16,30,3,80,0,4],[0,35,36,3,80,0,4],[1,26,2,0,180,0,1],[1,27,2,0,180,30,1],[1,32,2,1,180,60,1],[1,33,2,1,180,90,1],[1,37,6,2,180,120,1],[1,37,7,2,180,150,1],[1,37,12,0,180,0,1],[1,37,13,0,180,30,1],[1,33,17,1,180,60,1],[1,32,17,1,180,90,1],[1,27,17,2,180,120,1],[1,26,17,2,180,150,1],[1,22,13,0,180,0,1],[1,22,12,0,180,30,1],[1,22,7,1,180,60,1],[1,22,6,1,180,90,1],[2,26,2,0,180,0,1],[2,27,2,0,180,30,1],[2,32,2,1,180,60,1],[2,33,2,1,180,90,1],[2,37,6,2,180,120,1],[2,37,7,2,180,150,1],[2,37,12,0,180,0,1],[2,37,13,0,180,30,1],[2,33,17,1,180,60,1],[2,32,17,1,180,90,1],[2,27,17,2,180,120,1],[2,26,17,2,180,150,1],[2,22,13,0,180,0,1],[2,22,12,0,180,30,1],[2,22,7,1,180,60,1],[2,22,6,1,180,90,1],[-1,0,0,0,0,0,0]]}function StageData4(){this.MAP=[[0,0,0,0,0,0,0,0,11,11,0,81,78,78,78,78,78,78,78,78,78,78,78,78,78,78,80,0,0,0,0,0,0,0,0,0,105,17,0,0],[0,105,105,105,105,105,105,18,11,11,0,81,83,79,79,79,79,79,79,79,79,79,79,79,79,84,80,0,105,105,18,0,0,105,105,18,105,17,105,18],[0,105,19,15,15,15,105,17,81,80,0,81,80,0,0,0,0,0,104,9,0,0,0,0,0,81,80,0,105,19,16,0,0,14,105,17,105,17,105,17],[0,14,16,0,0,0,105,17,81,80,0,81,80,0,117,118,119,5,7,8,0,117,118,119,5,81,80,0,105,17,0,0,0,0,105,17,105,17,105,17],[0,0,0,0,0,0,105,17,81,80,0,81,80,0,120,121,128,119,5,0,117,129,121,122,4,81,80,0,105,17,0,0,0,0,105,17,105,17,105,17],[0,0,0,0,0,0,105,17,81,80,0,81,80,0,123,127,121,128,118,118,129,121,126,125,4,81,80,0,105,17,0,0,0,0,105,17,105,17,105,17],[0,105,18,0,0,0,105,17,81,80,0,81,80,0,1,123,127,121,121,121,121,126,125,6,3,81,80,0,105,105,105,105,105,105,105,17,14,16,105,17],[0,105,105,105,105,105,105,17,81,80,0,81,80,104,9,1,120,121,121,121,121,122,6,3,104,94,80,0,14,15,15,15,15,15,15,16,0,0,105,17],[0,14,15,15,15,15,15,16,81,80,0,81,80,7,8,0,120,121,121,121,121,122,4,0,7,96,80,0,0,105,105,105,105,105,105,105,105,105,19,16],[82,82,82,82,82,10,10,82,86,80,0,81,80,0,0,117,129,121,121,121,121,128,119,5,0,81,80,0,0,81,93,15,15,15,15,15,15,15,16,0],[79,79,79,79,79,10,10,79,84,80,0,81,80,0,117,129,121,126,124,124,127,121,128,119,5,81,80,0,0,81,80,0,105,105,105,105,105,105,105,18],[0,0,0,0,0,0,0,0,81,80,0,81,80,0,120,121,126,125,6,2,123,127,121,122,4,81,80,104,9,81,80,0,105,19,15,15,15,15,105,17],[0,117,118,118,118,118,119,5,81,80,0,81,80,0,123,124,125,6,3,0,1,123,124,125,4,11,11,7,8,81,80,0,105,17,0,0,0,0,14,16],[0,123,124,124,124,127,122,4,81,80,0,81,80,0,1,2,2,3,104,9,0,1,2,2,3,11,11,0,0,81,80,0,105,17,0,0,0,0,0,0],[0,1,2,2,2,120,122,4,81,85,10,86,85,82,82,82,82,82,95,97,82,82,82,82,82,86,85,82,82,86,80,0,105,17,0,0,0,0,105,18],[0,0,0,0,0,120,122,4,81,83,10,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,84,80,0,105,105,105,105,105,105,105,17],[0,0,0,0,0,120,122,4,81,80,0,104,9,0,0,0,0,0,104,9,0,0,0,104,9,0,0,0,0,81,80,0,14,15,15,15,15,15,15,16],[0,0,0,0,0,120,122,4,81,80,0,7,8,0,0,0,104,9,7,8,0,0,0,7,8,0,104,9,0,81,80,0,0,105,105,105,105,105,105,105],[0,0,0,0,0,120,122,4,81,85,82,82,82,82,82,82,95,97,82,82,82,82,82,82,82,82,95,97,10,86,80,0,0,14,15,15,15,15,15,15],[0,0,0,0,0,120,122,4,81,78,83,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,84,83,10,84,80,0,105,105,105,105,105,105,105,18],[0,117,118,118,118,129,122,4,11,11,11,104,9,0,0,0,0,0,117,118,118,118,118,119,5,104,94,80,0,81,80,0,105,19,15,15,15,15,105,17],[0,123,124,124,124,124,125,4,11,11,11,7,8,0,0,117,119,5,123,124,124,124,124,125,4,7,96,80,0,81,80,0,105,17,0,0,0,0,105,17],[0,1,2,2,2,2,2,3,81,78,80,0,0,0,0,120,122,4,1,2,2,2,2,2,3,0,81,80,0,81,80,0,105,17,0,0,0,0,105,17],[82,82,82,10,10,82,82,82,86,78,80,0,0,0,0,120,122,4,0,0,0,0,0,117,119,5,81,80,0,81,80,0,105,17,0,0,0,0,105,17],[79,79,79,10,10,79,79,79,84,78,80,117,118,118,118,129,122,4,117,119,5,0,0,120,122,4,81,80,0,81,80,0,105,17,0,0,0,0,105,17],[0,0,0,0,0,0,0,0,81,78,80,123,124,124,124,124,125,4,120,122,4,0,0,120,122,4,81,80,0,81,80,0,105,17,0,0,0,0,105,17],[0,117,118,118,118,118,119,5,81,78,80,1,2,2,2,2,2,3,120,122,4,0,0,120,122,4,81,80,0,81,80,0,105,17,0,0,0,0,105,17],[0,120,121,121,121,121,122,4,81,78,80,0,105,105,105,105,18,0,120,128,118,118,118,129,122,4,81,80,0,11,11,0,105,105,18,0,0,105,105,17],[0,123,124,124,124,124,125,4,81,78,80,0,105,19,15,15,16,0,123,124,124,124,124,124,125,4,81,80,0,11,11,0,14,15,16,0,0,14,15,16],[0,1,2,2,2,2,2,3,81,78,80,0,105,17,0,0,0,0,1,2,2,2,2,2,2,3,81,85,82,86,85,82,82,82,82,82,82,82,82,82],[0,104,9,0,0,0,104,9,81,78,80,0,105,17,0,0,0,0,0,0,0,0,0,0,0,0,81,78,78,78,78,78,78,78,78,78,78,78,78,78],[0,7,8,0,0,0,7,8,81,78,80,0,105,17,0,104,9,0,104,9,0,104,9,104,9,104,94,83,79,84,83,79,79,79,79,79,79,79,79,79],[0,0,0,0,0,0,0,0,81,78,80,0,105,17,0,7,8,0,7,8,0,7,8,7,8,7,11,11,0,81,80,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,81,78,80,0,105,17,0,0,0,0,0,104,9,104,9,104,9,104,94,80,0,81,80,0,105,105,105,105,105,105,105,18],[0,104,9,0,0,0,104,9,81,78,80,0,105,17,0,104,9,104,9,7,8,7,8,7,8,7,96,80,0,81,80,0,105,19,15,15,15,15,105,17],[0,7,8,0,0,0,7,8,81,78,80,0,105,17,0,7,8,7,8,0,0,0,0,0,0,0,81,80,0,81,80,0,105,17,0,0,0,0,14,16],[0,117,118,118,118,118,119,5,81,78,80,0,105,17,0,104,9,104,9,0,0,0,0,0,0,0,81,80,0,81,80,0,105,17,0,0,0,0,0,0],[0,120,121,121,121,121,122,4,81,78,80,0,105,17,0,7,8,7,8,0,0,0,0,0,0,0,81,80,0,81,80,0,105,17,0,0,0,0,105,18],[0,123,124,124,124,124,125,4,11,11,11,0,105,17,0,104,9,104,9,0,0,0,0,0,0,0,81,80,0,11,11,0,105,105,105,105,105,105,105,17],[0,1,2,2,2,2,2,3,11,11,11,0,105,17,0,7,8,7,8,0,0,0,0,0,0,0,81,80,0,11,11,0,14,15,15,15,15,15,15,16]];this.ENEMY=[[0,2,2,12,80,0,1],[0,2,6,12,80,0,1],[0,5,2,12,80,0,1],[0,5,6,12,80,0,1],[0,1,31,12,80,0,1],[0,1,33,12,80,0,1],[0,6,31,12,80,0,1],[0,6,33,12,80,0,1],[0,13,34,12,80,0,1],[0,13,36,12,80,0,1],[0,13,38,12,80,0,1],[0,21,29,12,80,0,1],[0,23,29,12,80,0,1],[0,25,29,12,80,0,1],[0,29,2,12,80,0,1],[0,29,5,12,80,0,1],[0,33,2,12,80,0,1],[0,33,5,12,80,0,1],[0,33,11,12,80,0,1],[0,33,14,12,80,0,1],[0,37,11,12,80,0,1],[0,37,14,12,80,0,1],[0,33,20,12,80,0,1],[0,33,23,12,80,0,1],[0,33,26,12,80,0,1],[0,37,20,12,80,0,1],[0,37,23,12,80,0,1],[0,37,26,12,80,0,1],[0,33,34,12,80,0,1],[0,33,37,12,80,0,1],[0,37,34,12,80,0,1],[0,37,37,12,80,0,1],[0,4,14,9,80,20,2],[0,4,19,9,80,0,2],[0,12,20,10,80,0,2],[0,14,23,11,80,20,2],[0,20,26,11,80,0,2],[0,22,26,11,80,20,2],[0,25,28,11,80,0,2],[0,3,4,3,80,0,4],[0,3,15,1,120,0,4],[0,3,18,2,120,40,4],[0,3,30,0,120,40,4],[0,3,34,1,120,0,4],[0,13,22,3,80,0,4],[0,21,22,0,120,0,4],[0,21,25,1,120,40,4],[0,24,38,3,80,0,4],[0,31,3,3,80,0,4],[0,35,13,3,80,0,4],[0,35,22,0,120,40,4],[0,35,25,2,120,0,4],[0,35,36,3,80,0,4],[0,19,12,0,120,0,2],[0,18,12,2,120,40,2],[0,19,11,2,120,40,2],[0,18,11,0,120,0,2],[0,14,8,0,120,0,2],[0,14,7,1,120,40,2],[0,15,8,1,120,40,2],[0,15,7,0,120,0,2],[0,18,3,2,120,0,2],[0,19,3,1,120,40,2],[0,18,4,1,120,40,2],[0,19,4,2,120,0,2],[0,23,7,1,120,0,2],[0,23,8,0,120,40,2],[0,22,7,0,120,40,2],[0,22,8,1,120,0,2],[-1,0,0,0,0,0,0]]}function StageData5(){this.MAP=[[360,360,360,360,4,51,34,35,5,34,35,52,6,360,360,360,360,360,114,106,107,116,116,116,116,106,107,116,116,116,116,106,107,116,116,116,116,116,116,118],[1,2,17,360,4,53,54,54,54,54,54,55,6,360,14,2,3,360,115,108,109,117,117,117,117,108,109,117,117,117,117,108,109,117,117,117,117,117,117,119],[4,42,6,360,18,8,8,8,8,8,8,8,21,360,4,44,6,360,360,102,103,360,360,360,360,102,103,360,360,360,360,98,99,360,360,360,360,360,360,360],[4,5,6,360,360,360,360,360,360,360,360,360,360,360,4,5,6,360,360,102,103,360,360,360,360,102,103,360,360,1,2,2,2,2,2,2,2,2,3,360],[4,42,6,360,14,2,2,2,2,2,2,2,17,360,4,44,6,360,360,104,105,360,360,360,360,102,103,360,360,4,40,5,41,5,5,40,5,41,6,360],[4,5,12,2,15,43,5,43,5,43,5,43,16,2,13,5,6,360,360,360,360,360,360,360,360,102,103,360,360,7,8,8,8,8,8,8,8,8,9,360],[4,32,33,5,5,48,49,49,49,49,49,50,5,5,32,33,6,360,360,100,101,360,360,360,360,102,103,360,360,78,79,360,360,78,79,360,360,78,79,360],[4,34,35,5,5,53,54,54,54,54,54,55,5,5,34,35,6,360,114,106,107,116,116,116,116,106,107,118,360,78,79,360,360,78,79,360,360,78,79,360],[7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,360,115,108,109,117,117,117,117,108,109,119,360,82,83,80,80,82,83,80,80,82,83,360],[360,360,96,97,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,102,103,360,360,360,360,104,105,360,360,84,85,81,81,84,85,81,81,84,85,360],[114,116,106,107,116,116,116,116,116,116,116,116,116,116,116,116,116,116,116,106,107,116,118,360,360,360,360,360,360,78,79,360,360,78,79,360,360,78,79,360],[115,117,108,109,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,108,109,117,119,360,360,360,360,360,360,78,79,360,360,78,79,360,360,78,79,360],[360,360,104,105,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,104,105,360,360,360,360,82,83,80,80,82,83,80,80,82,83,80,80,82,83,360],[360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,84,85,81,81,84,85,81,81,84,85,81,81,84,85,360],[360,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,360,360,360,360,360,360,360,78,79,360,360,78,79,360,360,78,79,360,360,78,79,360],[360,4,24,25,26,24,25,26,24,25,26,24,25,26,24,25,26,6,360,360,360,360,360,360,360,78,79,360,360,78,79,360,360,78,79,360,360,78,79,360],[360,4,38,360,28,27,360,28,27,360,28,27,360,28,27,360,39,6,80,80,82,83,360,360,360,82,83,80,80,82,83,82,83,82,83,80,80,82,83,360],[360,4,29,30,71,90,66,91,90,66,91,90,66,91,70,30,31,6,81,81,84,85,360,360,360,84,85,81,81,84,85,84,85,84,85,81,81,84,85,360],[360,4,24,25,93,24,25,26,24,25,26,24,25,26,92,25,26,6,360,360,78,79,360,360,360,360,360,360,360,360,360,78,79,360,360,360,360,360,360,360],[360,4,38,360,64,27,360,28,38,360,39,27,360,28,63,360,39,6,360,360,78,79,360,360,360,360,360,360,360,360,360,78,79,360,360,360,360,360,360,360],[360,4,29,30,95,29,30,31,29,30,31,29,30,31,94,30,31,6,360,360,78,79,360,360,360,14,2,2,17,360,14,2,2,17,360,14,2,2,17,360],[360,4,24,25,69,88,61,89,88,61,89,88,61,89,68,25,26,6,360,360,78,79,360,360,1,15,36,36,16,2,15,40,41,16,2,15,36,36,16,3],[360,4,38,360,28,27,360,28,27,360,28,27,360,28,27,360,39,6,360,360,78,79,360,360,7,19,37,37,20,8,19,5,5,20,8,19,37,37,20,9],[360,4,29,30,31,29,30,31,29,30,31,29,30,31,29,30,31,6,360,360,78,79,360,360,360,18,8,8,21,360,18,8,8,21,360,18,8,8,21,360],[360,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,360,360,78,79,360,360,360,360,78,79,360,360,360,360,360,360,360,360,78,79,360,360],[360,360,360,360,360,360,360,360,360,360,360,360,360,360,78,79,360,360,360,360,78,79,360,360,360,14,2,2,17,360,14,2,2,17,360,360,78,79,360,360],[360,360,360,360,360,360,360,360,360,360,360,360,360,360,78,79,360,360,360,360,82,83,80,80,1,15,5,5,16,2,15,36,36,16,3,360,78,79,360,360],[1,2,2,2,2,2,3,75,77,1,2,2,2,2,2,3,360,360,360,360,84,85,81,81,7,19,5,5,20,8,19,37,37,20,9,360,78,79,360,360],[4,5,24,25,25,26,6,360,360,4,24,25,25,26,5,6,360,360,360,360,360,360,360,360,360,18,8,8,21,360,18,8,8,21,360,360,78,79,360,360],[4,5,38,360,360,39,6,360,360,4,38,360,360,39,5,6,360,360,360,360,360,360,360,360,360,360,78,79,360,360,360,360,360,360,360,360,78,79,360,360],[4,5,29,30,30,31,6,360,360,4,29,30,30,31,5,6,360,360,360,360,14,2,2,17,360,14,2,2,17,360,14,2,2,17,360,360,78,79,360,360],[7,8,8,8,8,8,9,75,77,7,8,8,8,8,8,9,360,360,360,1,15,36,36,16,2,15,5,5,16,2,15,36,36,16,3,360,78,79,360,360],[72,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,7,19,37,37,20,8,19,5,5,20,8,19,37,37,20,9,360,78,79,360,360],[73,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,18,8,8,21,360,18,8,8,21,360,18,8,8,21,360,360,78,79,360,360],[74,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,78,79,360,360,360,360,360,360,360,360,78,79,360,360],[1,2,2,2,2,2,3,75,77,1,2,2,2,2,2,3,80,82,83,360,360,360,360,360,360,14,2,2,17,360,14,2,2,17,360,14,2,2,17,360],[4,5,24,25,25,26,6,360,360,4,24,25,25,26,5,6,81,84,85,360,360,360,360,360,1,15,36,36,16,2,15,5,5,16,2,15,36,36,16,3],[4,5,38,360,360,39,6,360,360,4,38,360,360,39,5,6,360,78,79,360,360,360,360,360,7,19,37,37,20,8,19,5,5,20,8,19,37,37,20,9],[4,5,29,30,30,31,6,360,360,4,29,30,30,31,5,6,360,82,83,82,83,360,360,360,360,18,8,8,21,360,18,8,8,21,360,18,8,8,21,360],[7,8,8,8,8,8,9,75,77,7,8,8,8,8,8,9,360,84,85,84,85,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360,360]];this.ENEMY=[[0,0,35,24,80,0,1],[0,0,39,24,80,0,1],[0,2,35,24,80,0,1],[0,2,39,24,80,0,1],[0,9,35,24,80,0,1],[0,9,39,24,80,0,1],[0,6,27,24,80,0,1],[0,6,31,24,80,0,1],[0,13,27,24,80,0,1],[0,13,31,24,80,0,1],[0,15,27,24,80,0,1],[0,15,31,24,80,0,1],[0,21,32,24,80,0,1],[0,32,27,24,80,0,1],[0,32,32,24,80,0,1],[0,37,37,24,80,0,1],[0,37,22,24,80,0,1],[0,29,3,24,80,0,1],[0,29,5,24,80,0,1],[0,32,3,24,80,0,1],[0,32,5,24,80,0,1],[0,35,3,24,80,0,1],[0,35,5,24,80,0,1],[0,38,3,24,80,0,1],[0,38,5,24,80,0,1],[1,4,17,20,120,0,2],[1,4,21,20,120,30,2],[1,14,21,20,120,60,2],[1,14,17,20,120,90,2],[2,4,17,20,60,0,2],[2,4,21,20,60,15,2],[2,14,21,20,60,30,2],[2,14,17,20,60,45,2],[0,26,21,20,80,0,2],[0,26,37,20,80,0,2],[0,7,19,3,120,0,4],[0,11,19,3,120,40,4],[0,1,29,3,120,0,4],[0,1,37,3,120,0,4],[0,14,29,3,120,0,4],[0,20,31,3,120,0,4],[0,38,21,3,120,0,4],[0,33,26,3,120,40,4],[0,33,31,3,120,0,4],[0,38,36,3,120,40,4],[0,30,4,3,120,40,4],[0,37,4,3,120,0,4],[0,5,0,16,120,0,4],[0,6,1,16,120,30,4],[0,10,1,16,120,0,4],[0,11,0,16,120,30,4],[1,5,1,0,160,0,4],[1,7,1,1,160,40,4],[1,9,1,2,160,80,4],[1,11,1,1,160,120,4],[2,5,1,0,160,0,4],[2,7,1,1,160,40,4],[2,9,1,2,160,80,4],[2,11,1,1,160,120,4],[-1,0,0,0,0,0,0]]}function play_sound(){}function load_config(){var t,n;for(st_index=0,hi_score=68e3,st_max[0]=0,st_max[1]=0,st_max[2]=0,st_max[3]=0,st_max[4]=0,st_max[5]=0,st_max[6]=0,st_max[7]=0,level=0,level_max=0,t=0;t<6;t++)best_s[0][t]=0,best_s[1][t]=0,best_s[2][t]=0,best_s[3][t]=0,best_s[4][t]=0,best_s[5][t]=0,best_s[6][t]=0,best_s[7][t]=0,best_t[0][t]=99999,best_t[1][t]=99999,best_t[2][t]=99999,best_t[3][t]=99999,best_t[4][t]=99999,best_t[5][t]=99999,best_t[6][t]=99999,best_t[7][t]=99999;if(canUseCookie()){for(beginCookieRead("config"),n=cookieRead(),n.length>0&&(st_index=parseInt(n)),n=cookieRead(),n.length>0&&(hi_score=parseInt(n)),n=cookieRead(),n.length>0&&(st_max[0]=parseInt(n)),n=cookieRead(),n.length>0&&(level=parseInt(n)),n=cookieRead(),n.length>0&&(level_max=parseInt(n)),n=cookieRead(),n.length>0&&(st_max[1]=parseInt(n)),t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[0][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[1][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[0][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[1][t]=parseInt(n));for(n=cookieRead(),n.length>0&&(st_max[2]=parseInt(n)),n=cookieRead(),n.length>0&&(st_max[3]=parseInt(n)),t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[2][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[3][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[2][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[3][t]=parseInt(n));for(n=cookieRead(),n.length>0&&(st_max[4]=parseInt(n)),n=cookieRead(),n.length>0&&(st_max[5]=parseInt(n)),t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[4][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[5][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[4][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[5][t]=parseInt(n));for(n=cookieRead(),n.length>0&&(st_max[6]=parseInt(n)),n=cookieRead(),n.length>0&&(st_max[7]=parseInt(n)),t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[6][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_s[7][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[6][t]=parseInt(n));for(t=0;t<6;t++)n=cookieRead(),n.length>0&&(best_t[7][t]=parseInt(n));endCookieRead()}best_s[0][5]!=0&&(level_max=1);best_s[1][5]!=0&&(level_max=2);best_s[2][5]!=0&&(level_max=3);best_s[3][5]!=0&&(level_max=4);best_s[4][5]!=0&&(level_max=5);best_s[5][5]!=0&&(level_max=6);best_s[6][5]!=0&&(level_max=7)}function save_config(){if(canUseCookie()){var n;for(beginCookieWrite(),cookieWrite(""+st_index),cookieWrite(""+hi_score),cookieWrite(""+st_max[0]),cookieWrite(""+level),cookieWrite(""+level_max),cookieWrite(""+st_max[1]),n=0;n<6;n++)cookieWrite(""+best_s[0][n]);for(n=0;n<6;n++)cookieWrite(""+best_s[1][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[0][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[1][n]);for(cookieWrite(""+st_max[2]),cookieWrite(""+st_max[3]),n=0;n<6;n++)cookieWrite(""+best_s[2][n]);for(n=0;n<6;n++)cookieWrite(""+best_s[3][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[2][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[3][n]);for(cookieWrite(""+st_max[4]),cookieWrite(""+st_max[5]),n=0;n<6;n++)cookieWrite(""+best_s[4][n]);for(n=0;n<6;n++)cookieWrite(""+best_s[5][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[4][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[5][n]);for(cookieWrite(""+st_max[6]),cookieWrite(""+st_max[7]),n=0;n<6;n++)cookieWrite(""+best_s[6][n]);for(n=0;n<6;n++)cookieWrite(""+best_s[7][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[6][n]);for(n=0;n<6;n++)cookieWrite(""+best_t[7][n]);endCookieWrite("config")}}function set_state(n){var t=state;state=n;_elapse=0;boost=!1;switch(t){case 0:state==2&&(score=0,bonus=0,jiki_init(!0));break;case 4:add_score(bonus);bonus=0;state!=0&&jiki_init(!1);st_index++;st_index>st_max[level]&&(st_max[level]=st_index);save_config()}switch(state){case 0:st_index>=6&&new_level();save_config();quake=0;break;case 2:map=!0;old_life=_DIV(t_damage+14,15);old_score=score;bonus=6800;stage_create();wave_clear();ring.removeAllElements();shot.removeAllElements();break;case 4:bonus_d=bonus;new_s=score+bonus_d-old_score;new_s>best_s[level][st_index]?(new_score=best_s[level][st_index]==0?!1:!0,best_s[level][st_index]=new_s):new_score=!1;miss=_DIV(t_damage+14,15)-old_life;new_t=6800-bonus_d+680*miss;new_t<best_t[level][st_index]?(new_record=best_t[level][st_index]==99999?!1:!0,best_t[level][st_index]=new_t):new_record=!1}}function setCMYColor(n){switch(n){case 0:g.setColor(COLOR_C);break;case 1:g.setColor(COLOR_M);break;case 2:g.setColor(COLOR_Y)}}function setOrigin(n,t){origin_x=n;origin_y=t}function setClip(n,t,i,r){clip_x=n;clip_y=t;clip_w=i;clip_h=r}function drawImage(n,t,i,r,u){return(t-=_win_x,i-=_win_y,t+r>clip_x&&t<clip_x+clip_w&&i+u>clip_y&&i<clip_y+clip_h)?(t+=origin_x,i+=origin_y,g.drawImage(n,t,i),!0):!1}function drawScaledImage(n,t,i,r,u,f,e,o,s){t-=_win_x;i-=_win_y;t+=origin_x;i+=origin_y;g.drawScaledImage(n,t,i,r,u,f,e,o,s)}function drawLine(n,t,i,r){n-=_win_x;t-=_win_y;i-=_win_x;r-=_win_y;(n>clip_x&&n<clip_x+clip_w&&t>clip_y&&t<clip_y+clip_h||i>clip_x&&i<clip_x+clip_w&&r>clip_y&&r<clip_y+clip_h)&&(n+=origin_x,t+=origin_y,i+=origin_x,r+=origin_y,g.drawLine(n,t,i,r))}function drawRect(n,t,i,r){n-=_win_x;t-=_win_y;n+i>clip_x&&n<clip_x+clip_w&&t+r>clip_y&&t<clip_y+clip_h&&(n+=origin_x,t+=origin_y,g.drawRect(n,t,i,r))}function frameTime(){return state==-1?0:80}function init(){_USE_LAYOUTTOUCH=!0}function start(){setTimeout(scrollTo,100,0,1);setCurrent("canvas0");g=new _ScalableGraphics;setGraphics(g);addLayout(80,480,80,80,0);addLayout(0,560,80,80,1);addLayout(160,560,80,80,2);addLayout(80,640,80,80,3);addLayout(280,640,80,80,4);addLayout(340,560,80,80,5);addLayout(400,480,80,80,6);g.setScale(2);g.setStrokeWidth(1);var n;for(origin_x=0,origin_y=0,COLOR_C=g.getColorOfRGB(0,255,255),COLOR_M=g.getColorOfRGB(255,0,255),COLOR_Y=g.getColorOfRGB(255,255,0),COLOR_K=g.getColorOfRGB(0,0,0),COLOR_R=g.getColorOfRGB(255,0,0),COLOR_G=g.getColorOfRGB(0,255,0),COLOR_W=g.getColorOfRGB(255,255,255),set_state(-1),st_max=new Array(8),best_s=new Array(8),best_t=new Array(8),n=0;n<8;n++)best_s[n]=new Array(6),best_t[n]=new Array(6);for(rand=new _Random,stage_init(),wave_data=new Array(18),n=0;n<18;n++)wave_data[n]=new Array(18);for(draw_data=new Array(18),n=0;n<18;n++)draw_data[n]=new Array(18);return ring=new _Vector(128),shot=new _Vector(128),main_img=new Array(RES_IMAGE_NUM),load_cnt=-1,m_damage=150,jiki_init(!0),load_config(),stage_create(),!0}function add_score(n){score+=n;score>hi_score&&(hi_score=score)}function add_bonus(n){add_score(n);bonus-=n}function st_update(){st_index>st_max[level]&&(st_index=st_max[level])}function new_level(){level++;level>7&&(level=0);level>level_max&&(level_max=level);st_index=0}function centerDrawString(n,t,i){g.setFont(t,_FONT_FAMILY);g.drawString(n,_DIV(240-g.stringWidth(n),2),i+_DIV(g.fontHeight(),2))}function drawStatusSub(n,t,i){g.setFont(_FONT_SMALL,_FONT_FAMILY);g.drawString(n,t-g.stringWidth(n),i)}function drawStage(n){g.setColor(COLOR_K);g.fillRect(0,0,240,240);setOrigin(12,12);setClip(0,0,216,216);stage_draw(n)}function drawStatus(n){var i,t,r,f,u,e,o,s;(n||!dark)&&g.drawImage(main_img[RES_IMAGE_MASK],0,0);quake>0?setOrigin(quake_x,quake_y):setOrigin(0,0);n?(i=0,r=25):(r=25,i=jiki_y-_win_y<96?215:0);g.setFont(_FONT_SMALL,_FONT_FAMILY);u=g.fontHeight();t=i==0?r:i+u;g.setColor(COLOR_W);g.drawString(u>16?"SC":"SCORE",0,t);drawStatusSub(""+score,100,t);g.setColor(COLOR_M);g.drawString("HI",106,t);drawStatusSub(""+hi_score,184,t);g.setColor(boost?COLOR_Y:COLOR_W);g.drawString("T",190,t);drawStatusSub(""+bonus,239,t);i==0?(t=0,f=r-u):(t=u,f=r-t);e=_DIV(240*t_damage,m_damage);e<100?g.setColor(COLOR_G):e<200?g.setColor(COLOR_Y):g.setColor(COLOR_R);g.fillRect(0,i+t,e,f);g.drawRect(0,i+t,239,f-1);!n&&map&&(o=jiki_x-_win_x<96?176:0,s=i==0?r:i==240?jiki_y-_win_y<96?176:0:i-64,stage_draw_map(o,s));quake>0&&setOrigin(0,0)}function paint(){var i=getLayoutState(),r,t,n;quake>0&&(quake_x=rand.next(_DIV(quake+2,3)),quake_y=rand.next(_DIV(quake+2,3)));switch(state){case-1:g.setColor(COLOR_K);g.fillRect(0,0,240,240);g.setColor(COLOR_W);centerDrawString("NOW LOADING...",_FONT_SMALL,110);load_cnt++;load_cnt>=RES_IMAGE_NUM?set_state(0):main_img[load_cnt]=getResImage("RES_IMAGE_"+load_cnt);g.setColor(COLOR_W);g.drawRect(50,130,140,5);g.fillRect(50,130,140*load_cnt/RES_IMAGE_NUM,5);break;case 0:drawStage(!0);drawStatus(!0);setCMYColor(_MOD(_elapse,3));centerDrawString("TANK BARRIER",_FONT_MEDIUM,50);switch(level){case 0:case 1:g.setColor(COLOR_W);break;case 2:case 3:g.setColor(COLOR_C);break;case 4:case 5:g.setColor(COLOR_M);break;case 6:case 7:g.setColor(COLOR_Y)}_MOD(level,2)==0?centerDrawString("LEVEL EASY",_FONT_SMALL,90):centerDrawString("LEVEL HARD",_FONT_SMALL,90);centerDrawString("STAGE "+(st_index<9?"0":"")+(st_index+1),_FONT_SMALL,115);g.setColor(COLOR_Y);g.drawString("BEST SCORE ",145-g.stringWidth("BEST SCORE "),150);best_s[level][st_index]==0?g.drawString("---",145,150):g.drawString(""+best_s[level][st_index],145,150);g.drawString("BEST TIME ",145-g.stringWidth("BEST TIME "),170);best_t[level][st_index]==99999?g.drawString("---",145,170):g.drawString(""+best_t[level][st_index],145,170);g.setColor(COLOR_W);(i&layoutBit(4))!=0||(i&layoutBit(5))!=0||(i&layoutBit(6))!=0?centerDrawString("LOADING...",_FONT_SMALL,190):_MOD(_elapse,15)<=_DIV(15,2)&&centerDrawString("PRESS [0] OR [5] KEY",_FONT_SMALL,190);centerDrawString("COPYRIGHT (C) SatisKia",_FONT_TINY,220);((i&layoutBit(4))!=0||(i&layoutBit(5))!=0||(i&layoutBit(6))!=0)&&set_state(2);break;case 2:drawStage(!1);jiki_draw(!1);drawStatus(!1);g.setColor(COLOR_W);centerDrawString("STAGE "+(st_index<9?"0":"")+(st_index+1),_FONT_SMALL,115);centerDrawString("R E A D Y",_FONT_SMALL,135);_elapse>30&&set_state(3);break;case 3:(level<2||level>3)&&(boost=(i&layoutBit(4))!=0||(i&layoutBit(5))!=0||(i&layoutBit(6))!=0?!0:!1);bonus>0&&(bonus-=boost?2:1,bonus<0&&(bonus=0));stage_update(!1);wave_update();shots_update();(i&layoutBit(3))!=0?jiki_down():(i&layoutBit(1))!=0?jiki_left():(i&layoutBit(2))!=0?jiki_right():(i&layoutBit(0))!=0?jiki_up():jiki_inertia();(wave_hit()||shots_hit()||stage_spear())&&_muteki<=0&&_damage==0&&_damage++;drawStage(!1);wave_draw();jiki_draw();shots_draw();stage_attack();drawStatus(!1);_elapse<30&&(g.setColor(COLOR_W),centerDrawString("S T A R T !",_FONT_SMALL,125));stage_destroyed()?set_state(4):t_damage>=m_damage&&set_state(5);break;case 4:_MOD(bonus,200)>0?(add_bonus(_MOD(bonus,200)),_elapse=0):bonus>=200&&(add_bonus(200),_elapse=0);stage_update(!0);drawStage(!1);jiki_draw(!1);drawStatus(!1);g.setColor(COLOR_W);centerDrawString("C L E A R !",_FONT_SMALL,105);n=(g.fontHeight()>16?"SC ":"SCORE ")+new_s;bonus_d>0&&(n=n+"(BONUS "+bonus_d+")");new_score&&(n=n+" UP!");centerDrawString(n,_FONT_SMALL,125);n="TIME "+new_t;miss>0&&(n=n+"(MISS "+miss+")");new_record&&(n=n+" UP!");centerDrawString(n,_FONT_SMALL,145);_elapse>30&&set_state(2);break;case 5:stage_update(!1);_MOD(_elapse,4)==0&&wave_update();shots_update();drawStage(!1);wave_draw();jiki_draw(!1);shots_draw();drawStatus(!1);g.setColor(COLOR_W);centerDrawString("G A M E  O V E R",_FONT_SMALL,125);_elapse>60&&set_state(0)}for(g.setScale(1),g.setFont(24,_FONT_FAMILY),g.setColor(g.getColorOfRGB(127,127,127)),g.fillRect(0,480,480,240),g.setColor(COLOR_W),r=0;r<7;r++)if(t=getLayout(r),g.setAlpha(128),g.fillRect(t.x,t.y,t.width,t.height),g.setAlpha(255),g.drawRect(t.x,t.y,t.width-1,t.height-1),(i&layoutBit(r))!=0)g.fillRect(t.x,t.y,t.width,t.height);else{switch(r){case 0:n="";break;case 1:n="";break;case 2:n="";break;case 3:n="";break;case 4:n="Z";break;case 5:n="X";break;case 6:n="C"}g.drawString(n,t.x+(t.width-g.stringWidth(n))/2,t.y+(t.height-g.fontHeight())/2+g.fontHeight())}g.setScale(2);_elapse++;quake>0&&quake--}function processEvent(n,t){switch(n){case 6:switch(state){case-1:break;case 0:var i=level,r=st_index;switch(t){case 0:level--;level<0&&(level=0);st_update();level!=i&&play_sound(0);break;case 3:level++;level>level_max&&(level=level_max);st_update();level!=i&&play_sound(0);break;case 1:st_index--;st_index<0&&(st_index=0);st_index!=r&&play_sound(0);break;case 2:st_index++;st_index>=6&&(st_index=5);st_update();st_index!=r&&play_sound(0)}break;default:switch(t){case 4:_barrier=0;break;case 5:_barrier=1;break;case 6:_barrier=2}}}}function shots_update(){for(var t,i,r,n=shot.size()-1;n>=0;n--)t=shot.elementAt(n),t.update(),i=t._x,r=t._y,i<=-12||i>=960||r<=-12||r>=960?shot.removeElementAt(n):_DIV(base_data[_DIV(_DIV(i+6,12),2)][_DIV(_DIV(r+6,12),2)],base)==4&&shot.removeElementAt(n)}function shots_hit(){for(var i=!1,r=jiki_x+6,u=jiki_y+6,t,n=shot.size()-1;n>=0;n--)t=shot.elementAt(n),Math.abs(t._x-r)<12&&Math.abs(t._y-u)<12&&(i=!0,shot.removeElementAt(n));return i}function shots_draw(){for(var t,n=shot.size()-1;n>=0;n--)t=shot.elementAt(n),drawImage(main_img[RES_IMAGE_SHOT],t._x+1,t._y+1,10,10)}function wave_put12(n,t,i,r,u){var f=i-_DIV(_win_x,12),e=r-_DIV(_win_y,12);return f<0||f>=18||e<0||e>=18?!1:stage_kabe12l(n,t,i,r)?!1:(wave_data[f][e]=u,!0)}function wave_clear(){for(var t,n=0;n<18;n++)for(t=0;t<18;t++)wave_data[n][t]=-1}function wave_update(){var n,t,s;for(wave_clear(),n=ring.size()-1;n>=0;n--){s=ring.elementAt(n);_MOD(_elapse,4)==0&&s.update();for(var e=!1,i=s._x,r=s._y,h=s._elapse,o=s._col,u=h,f=0,c=-2*h+3;u>=f;)wave_put12(i,r,i+u,r+f,o)&&(e=!0),wave_put12(i,r,i-u,r+f,o)&&(e=!0),wave_put12(i,r,i+u,r-f,o)&&(e=!0),wave_put12(i,r,i-u,r-f,o)&&(e=!0),wave_put12(i,r,i+f,r+u,o)&&(e=!0),wave_put12(i,r,i-f,r+u,o)&&(e=!0),wave_put12(i,r,i+f,r-u,o)&&(e=!0),wave_put12(i,r,i-f,r-u,o)&&(e=!0),c>=0&&(u--,c-=4*u),f++,c+=4*f+2;h>113&&e==!1&&ring.removeElementAt(n)}for(t=1;t<17;t++)for(n=1;n<17;n++)wave_data[n][t]>=0&&wave_data[n-1][t-1]!=wave_data[n][t]&&wave_data[n][t-1]!=wave_data[n][t]&&wave_data[n+1][t-1]!=wave_data[n][t]&&wave_data[n-1][t]!=wave_data[n][t]&&wave_data[n+1][t]!=wave_data[n][t]&&wave_data[n-1][t+1]!=wave_data[n][t]&&wave_data[n][t+1]!=wave_data[n][t]&&wave_data[n+1][t+1]!=wave_data[n][t]&&(wave_data[n][t]=-1)}function wave_hit(){var n=_DIV(jiki_x+6,12),t=_DIV(jiki_y+6,12);return(n-=_DIV(_win_x,12),t-=_DIV(_win_y,12),wave_data[n][t]>=0&&wave_data[n][t]!=_barrier)?!0:wave_data[n+1][t]>=0&&wave_data[n+1][t]!=_barrier?!0:wave_data[n][t+1]>=0&&wave_data[n][t+1]!=_barrier?!0:wave_data[n+1][t+1]>=0&&wave_data[n+1][t+1]!=_barrier?!0:!1}function wave_draw(){var n,t,i,e,r,u=origin_x-_MOD(_win_x,12),f=origin_y-_MOD(_win_y,12);for(g.setAlpha(192),t=0;t<18;t++)for(r=t*12,n=0;n<18;)if(wave_data[n][t]>=0){for(i=n+1;i<18;i++)if(wave_data[i][t]!=wave_data[n][t])break;if(i-n>1)for(setCMYColor(wave_data[n][t]),g.fillRect(n*12+u,r+f,12*(i-n),12);n<i;n++)draw_data[n][t]=-1;else draw_data[n][t]=wave_data[n][t],n++}else draw_data[n][t]=-1,n++;for(n=0;n<18;n++)for(e=n*12,t=0;t<18;)if(draw_data[n][t]>=0){for(i=t+1;i<18;i++)if(draw_data[n][i]!=draw_data[n][t])break;if(i-t>1)for(setCMYColor(draw_data[n][t]),g.fillRect(e+u,t*12+f,12,12*(i-t));t<i;t++)draw_data[n][t]=-1;else t++}else t++;for(t=0;t<18;t++)for(r=t*12,n=0;n<18;n++)draw_data[n][t]>=0&&(setCMYColor(draw_data[n][t]),g.fillRect(n*12+u,r+f,12,12));g.setAlpha(255)}function jiki_load_image(){switch(level){case 0:case 1:_img=RES_IMAGE_JIKI_0;break;case 2:case 3:_img=RES_IMAGE_JIKIP_0;break;case 4:case 5:_img=RES_IMAGE_JIKIM_0;break;case 6:case 7:_img=RES_IMAGE_JIKID_0}}function jiki_init(n){n?_life=10:(_life++,_life<=0&&(_life=1),_life>10&&(_life=10));t_damage=m_damage-_life*15;jiki_x=468;jiki_y=924;pattern_x=0;pattern_y=0;_mode=0;_direction=3;jiki_set_dsp();jiki_set_light(!0);_barrier=0;_damage=0;_muteki=0}function jiki_set_dsp(){dsp_x=jiki_x;dsp_y=jiki_y;_mode==1&&(dsp_x+=rand.next(3),dsp_y+=rand.next(3),play_sound(8))}function jiki_set_light(n){if(dark||n){_light_x=dsp_x-48;_light_y=dsp_y-48;switch(_direction){case 0:_light_y+=36;break;case 1:_light_x-=36;break;case 2:_light_x+=36;break;case 3:_light_y-=36}}}function jiki_down(){if(!(_damage>0)){_direction=0;var n=jiki_y;switch(_mode){case 0:jiki_y+=8;break;case 1:jiki_y+=4;break;case 2:jiki_y+=8}_mode=stage_hit(jiki_x,jiki_y);_mode==4&&(jiki_y=n+4,_mode=stage_hit(jiki_x,jiki_y),_mode==4&&(jiki_y=n));jiki_set_dsp();jiki_set_light(!1);pattern_x--;pattern_x<0&&(pattern_x=0);pattern_y++;pattern_y>1&&(pattern_y=0);_mode!=2&&play_sound(8)}}function jiki_left(){if(!(_damage>0)){_direction=1;var n=jiki_x;switch(_mode){case 0:jiki_x-=8;break;case 1:jiki_x-=4;break;case 2:jiki_x-=8}_mode=stage_hit(jiki_x,jiki_y);_mode==4&&(jiki_x=n-4,_mode=stage_hit(jiki_x,jiki_y),_mode==4&&(jiki_x=n));jiki_set_dsp();jiki_set_light(!1);pattern_x++;pattern_x>4&&(pattern_x=4);pattern_y++;pattern_y>1&&(pattern_y=0);_mode!=2&&play_sound(8)}}function jiki_right(){if(!(_damage>0)){_direction=2;var n=jiki_x;switch(_mode){case 0:jiki_x+=8;break;case 1:jiki_x+=4;break;case 2:jiki_x+=8}_mode=stage_hit(jiki_x,jiki_y);_mode==4&&(jiki_x=n+4,_mode=stage_hit(jiki_x,jiki_y),_mode==4&&(jiki_x=n));jiki_set_dsp();jiki_set_light(!1);pattern_x++;pattern_x>4&&(pattern_x=4);pattern_y++;pattern_y>1&&(pattern_y=0);_mode!=2&&play_sound(8)}}function jiki_up(){if(!(_damage>0)){_direction=3;var n=jiki_y;switch(_mode){case 0:jiki_y-=8;break;case 1:jiki_y-=4;break;case 2:jiki_y-=8}_mode=stage_hit(jiki_x,jiki_y);_mode==4&&(jiki_y=n-4,_mode=stage_hit(jiki_x,jiki_y),_mode==4&&(jiki_y=n));jiki_set_dsp();jiki_set_light(!1);pattern_x--;pattern_x<0&&(pattern_x=0);pattern_y++;pattern_y>1&&(pattern_y=0);_mode!=2&&play_sound(8)}}function jiki_inertia(){if(_mode==2)switch(_direction){case 0:jiki_down();break;case 1:jiki_left();break;case 2:jiki_right();break;case 3:jiki_up()}}function jiki_draw(){var n;if(_damage>0){if(_life>0){for(drawImage(main_img[_img+pattern_y*5+pattern_x],dsp_x,dsp_y,26,26),g.setColor(COLOR_W),n=0;n<3;n++)drawLine(dsp_x+12+rand.next(13),dsp_y+12+rand.next(13),dsp_x+12+rand.next(13),dsp_y+12+rand.next(13));_damage==1&&play_sound(7);_damage++;t_damage++;_damage>15&&(_damage=0,_life--,_life==0?_muteki<=0&&_damage==0&&_damage++:_muteki=30)}else stage_baku(dsp_x,dsp_y,99,_damage),_damage++;return}_muteki>0?(_muteki--,_MOD(_muteki,2)>0&&drawImage(main_img[_img+pattern_y*5+pattern_x],dsp_x,dsp_y,26,26)):drawImage(main_img[_img+pattern_y*5+pattern_x],dsp_x,dsp_y,26,26);setCMYColor(_barrier);drawRect(jiki_x-2+rand.next(3),jiki_y-2+rand.next(3),26,26)}function error(){launch("error.html")}var _Math,load_cnt;_Graphics.prototype={canUseClip:function(){return!!_context.clip},canUseText:function(){return!!_context.fillText},getColorOfRGB:function(n,t,i){return"rgb("+n+","+t+","+i+")"},getColorOfRGBA:function(n,t,i,r){return"rgba("+n+","+t+","+i+","+r/255+")"},setStrokeWidth:function(n){_context.lineWidth=n},setColor:function(n){_color=n;_context.fillStyle=_color;_context.strokeStyle=_color},setAlpha:function(n){_context.globalAlpha=n/255},setROP:function(n){_context.globalCompositeOperation=n},setFont:function(n,t){setFont(n,t);_context.font=""+_font_size+"px "+_font_family},stringWidth:function(n){return stringWidth(n)},fontHeight:function(){return fontHeight()},clearClip:function(){_context.restore();_context.save()},setClip:function(n,t,i,r){!_context.clip||(_context.restore(),_context.save(),_context.beginPath(),_context.moveTo(n,t),_context.lineTo(n+i,t),_context.lineTo(n+i,t+r),_context.lineTo(n,t+r),_context.closePath(),_context.clip())},drawLine:function(n,t,i,r){_context.beginPath();_context.moveTo(n+.5,t+.5);_context.lineTo(i+.5,r+.5);_context.stroke();_context.closePath()},drawRect:function(n,t,i,r){_context.strokeRect(n+.5,t+.5,i,r)},fillRect:function(n,t,i,r){_context.fillRect(n,t,i,r)},drawCircle:function(n,t,i){_context.beginPath();_context.arc(n,t,i,0,Math.PI*2,!1);_context.stroke()},drawString:function(n,t,i){_context.fillText?_context.fillText(n,t,i):_USE_DRAWSTRINGEX&&_drawStringEx(n,t,i)},setFlipMode:function(n){this.f=n},drawScaledImage:function(n,t,i,r,u,f,e,o,s){if(this.f==0)try{_context.drawImage(n,f,e,o,s,t,i,r,u)}catch(h){}else{_context.save();_context.setTransform(1,0,0,1,0,0);switch(this.f){case 1:_context.translate(t+r,i);_context.scale(-1,1);break;case 2:_context.translate(t,i+u);_context.scale(1,-1);break;case 3:_context.translate(t+r,i+u);_context.scale(-1,-1)}try{_context.drawImage(n,f,e,o,s,0,0,r,u)}catch(h){}_context.restore()}},drawImage:function(n,t,i){this.drawScaledImage(n,t,i,n.width,n.height,0,0,n.width,n.height)},drawTransImage:function(n,t,i,r,u,f,e,o,s,h,c,l){_context.save();_context.setTransform(1,0,0,1,0,0);_context.translate(t,i);_context.rotate(Math.PI*h/180);_context.scale(c/128,l/128);_context.translate(-o,-s);try{_context.drawImage(n,r,u,f,e,0,0,f,e)}catch(a){}_context.restore()}};window._USE_AUDIOEX=!1;window._USE_DRAWSTRINGEX=!1;window._USE_EXCANVAS=!1;window._USE_KEY=!1;window._USE_MOUSE=!1;window._USE_TOUCH=!1;window._USE_LAYOUTMOUSE=!1;window._USE_LAYOUTTOUCH=!1;window._USE_REQUESTANIMATIONFRAME=!1;var _kill_timer=!1,_start_time,_end_time,_sleep_time,_canvas=null,_context,_lock,_g,_key=0,_key_array,_use_layout=!1,_layout=[],_mouse_x,_mouse_y,_touch_start=!1,_touch_x=[],_touch_y=[],_touch_x0,_touch_y0,_color,_font_size,_font_family,_stringex=[],_stringex_num,_text,_text_style="visibility:hidden;position:absolute;left:0;top:0";_Math={int:function(n){return n<0?Math.ceil(n):Math.floor(n)},div:function(n,t){return n<0?Math.ceil(n/t):Math.floor(n/t)},mod:function(n,t){return n<0?(n=-n,-(n-Math.floor(n/t)*t)):n-Math.floor(n/t)*t}};_Random.prototype={next:function(n){return Math.random()<.5?-Math.floor(Math.random()*n):Math.floor(Math.random()*n)},nextInt:function(){return Math.random()<.5?-Math.floor(Math.random()*2147483648):Math.floor(Math.random()*2147483648)}};_ScalableGraphics.prototype={canUseClip:function(){return!!_context.clip},canUseText:function(){return!!_context.fillText},setScale:function(n){this.s=n},scale:function(){return this.s},getColorOfRGB:function(n,t,i){return"rgb("+n+","+t+","+i+")"},setStrokeWidth:function(n){_context.lineWidth=n*this.s},setColor:function(n){_color=n;_context.fillStyle=_color;_context.strokeStyle=_color},setAlpha:function(n){_context.globalAlpha=n/255},setROP:function(n){_context.globalCompositeOperation=n},setFont:function(n,t){setFont(Math.floor(n*this.s),t);_context.font=""+_font_size+"px "+_font_family},stringWidth:function(n){return this.s==0?0:stringWidth(n)/this.s},fontHeight:function(){return this.s==0?0:fontHeight()/this.s},clearClip:function(){_context.restore();_context.save()},setClip:function(n,t,i,r){!_context.clip||(_context.restore(),_context.save(),_context.beginPath(),_context.moveTo(n*this.s,t*this.s),_context.lineTo(n*this.s+i*this.s,t*this.s),_context.lineTo(n*this.s+i*this.s,t*this.s+r*this.s),_context.lineTo(n*this.s,t*this.s+r*this.s),_context.closePath(),_context.clip())},drawLine:function(n,t,i,r){_context.beginPath();_context.moveTo((n+.5)*this.s,(t+.5)*this.s);_context.lineTo((i+.5)*this.s,(r+.5)*this.s);_context.stroke();_context.closePath()},drawRect:function(n,t,i,r){_context.strokeRect((n+.5)*this.s,(t+.5)*this.s,i*this.s,r*this.s)},fillRect:function(n,t,i,r){_context.fillRect(n*this.s,t*this.s,i*this.s,r*this.s)},drawCircle:function(n,t,i){_context.beginPath();_context.arc(n*this.s,t*this.s,i*this.s,0,Math.PI*2,!1);_context.stroke()},drawString:function(n,t,i){_context.fillText?_context.fillText(n,t*this.s,i*this.s):_USE_DRAWSTRINGEX&&_drawStringEx(n,t*this.s,i*this.s)},setFlipMode:function(n){this.f=n},drawScaledImage:function(n,t,i,r,u,f,e,o,s){if(this.f==0)try{_context.drawImage(n,f,e,o,s,t*this.s,i*this.s,r*this.s,u*this.s)}catch(h){}else{_context.save();_context.setTransform(1,0,0,1,0,0);switch(this.f){case 1:_context.translate((t+r)*this.s,i*this.s);_context.scale(-this.s,this.s);break;case 2:_context.translate(t*this.s,(i+u)*this.s);_context.scale(this.s,-this.s);break;case 3:_context.translate((t+r)*this.s,(i+u)*this.s);_context.scale(-this.s,-this.s)}try{_context.drawImage(n,f,e,o,s,0,0,r,u)}catch(h){}_context.restore()}},drawImage:function(n,t,i){this.drawScaledImage(n,t,i,n.width,n.height,0,0,n.width,n.height)},drawTransImage:function(n,t,i,r,u,f,e,o,s,h,c,l){_context.save();_context.setTransform(1,0,0,1,0,0);_context.translate(t*this.s,i*this.s);_context.rotate(Math.PI*h/180);_context.scale(c*this.s/128,l*this.s/128);_context.translate(-o,-s);try{_context.drawImage(n,r,u,f,e,0,0,f,e)}catch(a){}_context.restore()}};_Vector.prototype={size:function(){return this.n},isEmpty:function(){return this.n==0},elementAt:function(n){return this.o[n]},firstElement:function(){return this.o[0]},lastElement:function(){return this.o[this.n-1]},setElementAt:function(n,t){t>=0&&t<this.n&&(this.o[t]=n)},removeElementAt:function(n){if(n>=0&&n<this.n){for(this.i=n;this.i<this.n-1;this.i++)this.o[this.i]=this.o[this.i+1];this.n--}},insertElementAt:function(n,t){if(t>=0&&t<this.n){for(this.i=this.n-1;this.i>=t;this.i--)this.o[this.i+1]=this.o[this.i];this.o[t]=n;this.n++}},addElement:function(n){this.o[this.n]=n;this.n++},removeAllElements:function(){this.n=0}};Enemy.prototype.move=function(n,t){if(t){var r=this._x,u=this._y,o,i,s,h,c,l,f=0,e=0,a=n*n;if(c=this._tx>r?1:-1,s=this._tx>r?this._tx-r:r-this._tx,l=this._ty>u?1:-1,h=this._ty>u?this._ty-u:u-this._ty,this._x=r,this._y=u,s>=h){for(i=-s,o=0;o<=n;o++)if(this._x+=c,i+=2*h,i>=0&&(this._y+=l,i-=2*s),f=this._x-r,e=this._y-u,f*f+e*e>=a)break}else for(i=-h,o=0;o<=n;o++)if(this._y+=l,i+=2*s,i>=0&&(this._x+=c,i-=2*h),f=this._x-r,e=this._y-u,f*f+e*e>=a)break;this._tx+=f;this._ty+=e}else switch(this._direction){case 0:this._y+=n;this._pattern--;this._pattern<0&&(this._pattern=0);break;case 1:this._x-=n;this._pattern++;this._pattern>4&&(this._pattern=4);break;case 2:this._x+=n;this._pattern++;this._pattern>4&&(this._pattern=4);break;case 3:this._y-=n;this._pattern--;this._pattern<0&&(this._pattern=0);break;case 4:this._x-=n;this._y+=n;break;case 5:this._x-=n;this._y-=n;break;case 6:this._x+=n;this._y+=n;break;case 7:this._x+=n;this._y-=n}};Enemy.prototype.spear=function(){var t=this._x+12,i=this._y+12,s=jiki_x+12,h=jiki_y+12,r,n,e,o,c,l,u,f,a=400;if(c=s>t?1:-1,e=s>t?s-t:t-s,l=h>i?1:-1,o=h>i?h-i:i-h,this._sx=t,this._sy=i,e>=o){for(n=-e,r=0;r<=20;r++)if(this._sx+=c,n+=2*o,n>=0&&(this._sy+=l,n-=2*e),u=this._sx-t,f=this._sy-i,u*u+f*f>=a)break}else for(n=-o,r=0;r<=20;r++)if(this._sy+=l,n+=2*e,n>=0&&(this._sx+=c,n-=2*o),u=this._sx-t,f=this._sy-i,u*u+f*f>=a)break};Enemy.prototype.update=function(n){var r,u,t,i;if(this._damage>=this.m_damage)this._elapse++;else if(!n){if(this._type!=0&&this._type!=4&&this._x>=_win_x-132&&this._x<=_win_x+324&&this._y>=_win_y-132&&this._y<=_win_y+324){r=this._x;u=this._y;switch(this._type){case 1:this.move(2,!1);break;case 2:this.move(4,!1);break;case 3:_MOD(this._elapse,15)==0&&(this._direction=Math.abs(this._x-jiki_x)>Math.abs(this._y-jiki_y)?this._x>jiki_x?1:2:this._y>jiki_y?3:0);this.move(6,!1);break;case 5:if(_MOD(this._elapse,15)==0){switch(this._direction){case 4:switch(rand.next(2)){case-1:this._direction=5;break;case 0:this._direction=6;break;case 1:this._direction=7}break;case 5:switch(rand.next(2)){case-1:this._direction=4;break;case 0:this._direction=6;break;case 1:this._direction=7}break;case 6:switch(rand.next(2)){case-1:this._direction=4;break;case 0:this._direction=5;break;case 1:this._direction=7}break;case 7:switch(rand.next(2)){case-1:this._direction=4;break;case 0:this._direction=5;break;case 1:this._direction=6}}break}this.move(6,!1);break;case 6:_MOD(this._elapse,5)==0&&(this._tx=jiki_x,this._ty=jiki_y);this.move(6,!0)}if(stage_hit(this._x,this._y)==4){this._x=r;this._y=u;switch(this._type){case 1:switch(this._direction){case 0:this._direction=3;break;case 1:this._direction=2;break;case 2:this._direction=1;break;case 3:this._direction=0}break;case 2:case 3:switch(this._direction){case 0:switch(rand.next(2)){case-1:this._direction=1;break;case 0:this._direction=2;break;case 1:this._direction=3}break;case 1:switch(rand.next(2)){case-1:this._direction=0;break;case 0:this._direction=2;break;case 1:this._direction=3}break;case 2:switch(rand.next(2)){case-1:this._direction=0;break;case 0:this._direction=1;break;case 1:this._direction=3}break;case 3:switch(rand.next(2)){case-1:this._direction=0;break;case 0:this._direction=1;break;case 1:this._direction=2}}break;case 5:switch(this._direction){case 4:switch(rand.next(2)){case-1:this._direction=5;break;case 0:this._direction=6;break;case 1:this._direction=7}break;case 5:switch(rand.next(2)){case-1:this._direction=4;break;case 0:this._direction=6;break;case 1:this._direction=7}break;case 6:switch(rand.next(2)){case-1:this._direction=4;break;case 0:this._direction=5;break;case 1:this._direction=7}break;case 7:switch(rand.next(2)){case-1:this._direction=4;break;case 0:this._direction=5;break;case 1:this._direction=6}}break;case 6:switch(rand.next(3)){case-2:this._tx=this._x-960;this._ty=this._y;break;case-1:this._tx=this._x+960;this._ty=this._y;break;case 0:this._tx=this._x+(this._x-jiki_x);this._ty=this._y+(this._y-jiki_y);break;case 1:this._tx=this._x;this._ty=this._y-960;break;case 2:this._tx=this._x;this._ty=this._y+960}}}this._type==6&&this.spear()}if(_MOD(this._elapse,this._interval)==this._shed&&this._x>=_win_x-132&&this._x<=_win_x+324&&this._y>=_win_y-132&&this._y<=_win_y+324)switch(this._attack){case 0:case 1:case 2:ring.addElement(new Ring(_DIV(this._x,12)+1,_DIV(this._y,12)+1,this._attack));play_sound(4);break;case 3:t=rand.next(2)+1;t==this._col&&(t++,t>2&&(t=0));this._col=t;ring.addElement(new Ring(_DIV(this._x,12)+1,_DIV(this._y,12)+1,t));play_sound(4);break;case 4:switch(this._direction){case 0:shot.addElement(new Shot(this._x+8,this._y+8,this._x+8,960));break;case 1:shot.addElement(new Shot(this._x+8,this._y+8,0,this._y+8));break;case 2:shot.addElement(new Shot(this._x+8,this._y+8,960,this._y+8));break;case 3:shot.addElement(new Shot(this._x+8,this._y+8,this._x+8,0))}play_sound(5);break;case 5:shot.addElement(new Shot(this._x+8,this._y+8,jiki_x+8,jiki_y+8));play_sound(5);break;case 6:for(i=0;i<12;i++)shot.addElement(new Shot(this._x+8,this._y+8,this._x+8+COS[i],this._y+8+SIN[i]));play_sound(5)}this._elapse++}};var chip=1,line=1,base=1,bg_image,base_data,base_image,base_x,base_y,back_image=-1,enemy,enemy_size,_attack,attack_x,attack_y,attack_x1,attack_y1,attack_x2,attack_y2,pattern;Ring.prototype.update=function(){this._elapse++};Shot.prototype.update=function(){this._elapse+=6;var t,n,u,f,e,o,i,r,s=this._elapse*this._elapse;if(e=this._x1>this._x0?1:-1,u=this._x1>this._x0?this._x1-this._x0:this._x0-this._x1,o=this._y1>this._y0?1:-1,f=this._y1>this._y0?this._y1-this._y0:this._y0-this._y1,this._x=this._x0,this._y=this._y0,u>=f){for(n=-u,t=0;t<=this._elapse;t++)if(this._x+=e,n+=2*f,n>=0&&(this._y+=o,n-=2*u),i=this._x-this._x0,r=this._y-this._y0,i*i+r*r>=s)break}else for(n=-f,t=0;t<=this._elapse;t++)if(this._y+=o,n+=2*u,n>=0&&(this._x+=e,n-=2*f),i=this._x-this._x0,r=this._y-this._y0,i*i+r*r>=s)break};var RES_IMAGE_BACK1=0,RES_IMAGE_BACK5=1,RES_IMAGE_BAKU=2,RES_IMAGE_BASE0=3,RES_IMAGE_BASE1=4,RES_IMAGE_BASE2=5,RES_IMAGE_BASE3=6,RES_IMAGE_BASE4=7,RES_IMAGE_BASE5=8,RES_IMAGE_ENEMY_00=9,RES_IMAGE_ENEMY_01=10,RES_IMAGE_ENEMY_02=11,RES_IMAGE_ENEMY_03=12,RES_IMAGE_ENEMY_10=13,RES_IMAGE_ENEMY_11=14,RES_IMAGE_ENEMY_12=15,RES_IMAGE_ENEMY_13=16,RES_IMAGE_ENEMY_20=17,RES_IMAGE_ENEMY_21=18,RES_IMAGE_ENEMY_22=19,RES_IMAGE_ENEMY_23=20,RES_IMAGE_ENEMY_24=21,RES_IMAGE_ENEMY_25=22,RES_IMAGE_ENEMY_26=23,RES_IMAGE_ENEMY_27=24,RES_IMAGE_ENEMY_28=25,RES_IMAGE_ENEMY_29=26,RES_IMAGE_ENEMY_30=27,RES_IMAGE_ENEMY_31=28,RES_IMAGE_ENEMY_32=29,RES_IMAGE_ENEMY_33=30,RES_IMAGE_ENEMY_34=31,RES_IMAGE_ENEMY_35=32,RES_IMAGE_ENEMY_36=33,RES_IMAGE_ENEMY_37=34,RES_IMAGE_ENEMY_38=35,RES_IMAGE_ENEMY_39=36,RES_IMAGE_ENEMY_40=37,RES_IMAGE_ENEMY_41=38,RES_IMAGE_ENEMY_42=39,RES_IMAGE_ENEMY_50=40,RES_IMAGE_ENEMY_60=41,RES_IMAGE_ENEMYD_00=42,RES_IMAGE_ENEMYD_01=43,RES_IMAGE_ENEMYD_02=44,RES_IMAGE_ENEMYD_10=45,RES_IMAGE_ENEMYD_11=46,RES_IMAGE_ENEMYD_20=47,RES_IMAGE_ENEMYD_30=48,RES_IMAGE_ENEMYD_31=49,RES_IMAGE_ENEMYD_32=50,RES_IMAGE_ENEMYD_33=51,RES_IMAGE_ENEMYD_34=52,RES_IMAGE_ENEMYD_40=53,RES_IMAGE_ENEMYD_41=54,RES_IMAGE_ENEMYD_42=55,RES_IMAGE_ENEMYD_50=56,RES_IMAGE_ENEMYD_60=57,RES_IMAGE_JIKI_0=58,RES_IMAGE_JIKI_1=59,RES_IMAGE_JIKI_2=60,RES_IMAGE_JIKI_3=61,RES_IMAGE_JIKI_4=62,RES_IMAGE_JIKI_5=63,RES_IMAGE_JIKI_6=64,RES_IMAGE_JIKI_7=65,RES_IMAGE_JIKI_8=66,RES_IMAGE_JIKI_9=67,RES_IMAGE_JIKID_0=68,RES_IMAGE_JIKID_1=69,RES_IMAGE_JIKID_2=70,RES_IMAGE_JIKID_3=71,RES_IMAGE_JIKID_4=72,RES_IMAGE_JIKID_5=73,RES_IMAGE_JIKID_6=74,RES_IMAGE_JIKID_7=75,RES_IMAGE_JIKID_8=76,RES_IMAGE_JIKID_9=77,RES_IMAGE_JIKIM_0=78,RES_IMAGE_JIKIM_1=79,RES_IMAGE_JIKIM_2=80,RES_IMAGE_JIKIM_3=81,RES_IMAGE_JIKIM_4=82,RES_IMAGE_JIKIM_5=83,RES_IMAGE_JIKIM_6=84,RES_IMAGE_JIKIM_7=85,RES_IMAGE_JIKIM_8=86,RES_IMAGE_JIKIM_9=87,RES_IMAGE_JIKIP_0=88,RES_IMAGE_JIKIP_1=89,RES_IMAGE_JIKIP_2=90,RES_IMAGE_JIKIP_3=91,RES_IMAGE_JIKIP_4=92,RES_IMAGE_JIKIP_5=93,RES_IMAGE_JIKIP_6=94,RES_IMAGE_JIKIP_7=95,RES_IMAGE_JIKIP_8=96,RES_IMAGE_JIKIP_9=97,RES_IMAGE_LIGHT=98,RES_IMAGE_MASK=99,RES_IMAGE_SHOT=100,RES_IMAGE_NUM=101,g,rand,_win_x,_win_y,wave_data,draw_data,ring,shot,jiki_x,jiki_y,dsp_x,dsp_y,_light_x,_light_y,pattern_x,pattern_y,_mode,_direction,_barrier,_damage,t_damage,m_damage,_life,_muteki,_img,COLOR_C,COLOR_M,COLOR_Y,COLOR_K,COLOR_R,COLOR_G,COLOR_W,_FONT_FAMILY=" ",_FONT_TINY=12,_FONT_SMALL=16,_FONT_MEDIUM=24,_FONT_LARGE=30,COS=[1358,1176,679,0,-678,-1176,-1358,-1176,-679,0,679,1176],SIN=[0,678,1176,1358,1176,678,0,-679,-1176,-1358,-1176,-679],state=-1,_elapse,boost=!1,map=!0,quake=0,quake_x,quake_y,origin_x,origin_y,clip_x,clip_y,clip_w,clip_h,st_index,st_max,level,level_max,score=0,hi_score,bonus=0,old_score,bonus_d,best_s,new_s,new_score,old_life,miss,best_t,new_t,new_record,dark,main_img