/*
 * D2JS
 * Copyright (C) SatisKia. All rights reserved.
 */
(function(n){function su(){return!!r.createElement(gr).getContext}function fo(){f=[];f[0]=8;f[1]=9;f[2]=13;f[3]=16;f[4]=17;f[5]=32;f[6]=37;f[7]=38;f[8]=39;f[9]=40;f[10]=48;f[11]=49;f[12]=50;f[13]=51;f[14]=52;f[15]=53;f[16]=54;f[17]=55;f[18]=56;f[19]=57;f[20]=67;f[21]=88;f[22]=90;init();_USE_EXCANVAS||su()?(_USE_LAYOUTMOUSE&&(it=!0,_USE_MOUSE=!0),_USE_LAYOUTTOUCH&&(it=!0,_USE_TOUCH=!0),_USE_KEY&&(e(r,yf,os),e(r,pf,ss)),_USE_TOUCH&&(e(r,ai,ks),e(r,vi,ds),e(r,yi,gs)),y=r.createElement(nu),y.style.cssText=hu,r.body.appendChild(y),start()&&cu()):error()}function eo(){processEvent(13,n.orientation)}function oo(){processEvent(14,0)}function cu(){ti=!1;p()}function so(){ti=!0}function ho(n){tr=n}function lu(){w=frameTime()-(ht-ii);w<0&&(w=0);w>frameTime()&&(w=frameTime())}function vt(){while(ht>ii&&ht-ii<frameTime())ht=rt()}function p(){if(ti){ti=!1;return}ii=rt();tr();ht=rt();_USE_REQUESTANIMATIONFRAME?n.requestAnimationFrame?(vt(),n.requestAnimationFrame(p)):n.webkitRequestAnimationFrame?(vt(),n.webkitRequestAnimationFrame(p)):n.mozRequestAnimationFrame?(vt(),n.mozRequestAnimationFrame(p)):n.oRequestAnimationFrame?(vt(),n.oRequestAnimationFrame(p)):n.msRequestAnimationFrame?(vt(),n.msRequestAnimationFrame(p)):(lu(),n.setTimeout(p,w)):(lu(),n.setTimeout(p,w))}function e(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent(bt+t,i):n[bt+t]=i}function s(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent(bt+t,i):n[bt+t]=null}function co(){_USE_MOUSE&&u!=null&&(s(u,ft,fr),s(u,pi,er),s(u,kt,wu),s(u,dt,bu),s(u,et,or))}function au(){_USE_MOUSE&&(e(u,ft,fr),e(u,pi,er),e(u,kt,wu),e(u,dt,bu),e(u,et,or))}function lo(n){u=r.getElementById(n);t=u.getContext(tu);vu();t.textAlign=wi;t.textBaseline=bi;ri=new kr;au()}function ao(n){ri=n}function vo(){return u}function yo(){return t}function po(){return ri}function wo(n){return u=n}function bo(n){return t=n}function vu(){ct=!1}function ko(n,i){u.width=n;u.height=i;t.textAlign=wi;t.textBaseline=bi}function ir(){return parseInt(u.width)}function rr(){return parseInt(u.height)}function oi(n){for(var t=0;n;)t+=n.offsetLeft,n=n.offsetParent;return t}function si(n){for(var t=0;n;)t+=n.offsetTop,n=n.offsetParent;return t}function go(){if(!!r.documentElement&&r.documentElement.clientWidth>0)return r.documentElement.clientWidth;if(!r.body){if(!!n.innerWidth)return n.innerWidth}else return r.body.clientWidth;return 0}function ns(){if(!!r.documentElement&&r.documentElement.clientHeight>0)return r.documentElement.clientHeight;if(!r.body){if(!!n.innerHeight)return n.innerHeight}else return r.body.clientHeight;return 0}function ts(){return n.orientation}function yu(n,t){var u="",i=n.indexOf(wf+t+ki),r;return i<0&&(i=n.indexOf("&"+t+ki)),i>=0&&(i+=t.length+2,r=n.indexOf("&",i),r<0&&(r=n.length),u=n.substring(i,r)),decodeURIComponent(u)}function is(n){for(var i,r=n.split("&"),u=[],t=0;t<r.length;t++)i=r[t].split(ki),u[i[0]]=decodeURIComponent(i[1]);return u}function rs(n){return yu(dr.href,n)}function us(n){return r.getElementById(n)}function fs(n){var t=r.getElementById(n).innerHTML;return t=t.replace(new RegExp("&lt;",tt),"<"),t.replace(new RegExp("&gt;",tt),">")}function rt(){return(new Date).getTime()}function es(n){var i=n.length,t;for(f=[],t=0;t<i;t++)f[t]=n[t]}function ur(n){for(var i=f.length,t=0;t<i;t++)if(f[t]==n)return 1<<t;return 0}function os(n){var t=ur(n.keyCode);(lt&t)==0&&(lt+=t);processEvent(4,n.keyCode)}function ss(n){var t=ur(n.keyCode);(lt&t)!=0&&(lt-=t);processEvent(5,n.keyCode)}function hs(){return lt}function cs(n,t,i,r,u){this.x=n;this.y=t;this.width=i;this.height=r;this.id=u;this.shape=null;this.coords=null}function ls(){i=[]}function pu(n,t,r,u,f){i[i.length]=new cs(n,t,r,u,f)}function as(n,r,u,f,e,o,s){var c,h;if(pu(n,r,u,f,e),!!t.isPointInPath)for(i[i.length-1].shape=o,c=s.split(v),i[i.length-1].coords=new Array(c.length),h=0;h<c.length;h++)i[i.length-1].coords[h]=parseInt(c[h])}function vs(n){if(i.length>0)for(var t=0;t<i.length;t++)if(i[t].id==n)return i[t];return null}function ut(n,r){var u,f;if(i.length>0)for(u=0;u<i.length;u++)if(i[u].shape==null){if(n>=i[u].x&&n<i[u].x+i[u].width&&r>=i[u].y&&r<i[u].y+i[u].height)return i[u].id}else{if(t.beginPath(),i[u].shape==bf)t.arc(i[u].x+i[u].coords[0],i[u].y+i[u].coords[1],i[u].coords[2],0,Math.PI*2,!1);else if(i[u].shape==kf){for(t.moveTo(i[u].x+i[u].coords[0],i[u].y+i[u].coords[1]),f=2;f<i[u].coords.length-1;f+=2)t.lineTo(i[u].x+i[u].coords[f],i[u].y+i[u].coords[f+1]);t.closePath()}else i[u].shape==df&&(t.moveTo(i[u].x+i[u].coords[0],i[u].y+i[u].coords[1]),t.lineTo(i[u].x+i[u].coords[2],i[u].y+i[u].coords[1]),t.lineTo(i[u].x+i[u].coords[2],i[u].y+i[u].coords[3]),t.lineTo(i[u].x+i[u].coords[0],i[u].y+i[u].coords[3]),t.closePath());if(t.isPointInPath(n,r))return i[u].id}return-1}function ys(){for(var i=0,t,n=0;n<l.length;n++)t=ut(l[n],b[n]),t>=0&&(i|=1<<t);return i}function ps(n){return 1<<n}function yt(n){ui=n.clientX+r.body.scrollLeft+r.documentElement.scrollLeft-oi(u);fi=n.clientY+r.body.scrollTop+r.documentElement.scrollTop-si(u)}function fr(n){if(yt(n),it&&i.length>0){var t=ut(ui,fi);if(t>=0){processEvent(6,t);return}}processEvent(8,0)}function er(n){yt(n);processEvent(9,0)}function wu(n){yt(n);processEvent(10,0)}function bu(n){yt(n);processEvent(11,0)}function or(n){if(yt(n),it&&i.length>0){var t=ut(ui,fi);if(t>=0){processEvent(7,t);return}}processEvent(12,0)}function ws(){return ui}function bs(){return fi}function sr(n){l=[];b=[];for(var t=0;t<n.touches.length;t++)l[t]=n.touches[t].pageX-oi(u),b[t]=n.touches[t].pageY-si(u)}function ks(n){if(sr(n),k=l[0],d=b[0],k>=0&&k<ir()&&d>=0&&d<rr()){if(ei=!0,it&&i.length>0){var t=ut(k,d);if(t>=0){processEvent(6,t);n.preventDefault();return}}processEvent(15,0);n.preventDefault()}}function ds(n){ei&&(sr(n),k=l[0],d=b[0],processEvent(16,0),n.preventDefault())}function gs(n){if(ei){if(ei=!1,sr(n),it&&i.length>0){var t=ut(k,d);if(t>=0){processEvent(7,t);n.preventDefault();return}}processEvent(17,0);n.preventDefault()}}function nh(){return l.length}function th(n){return n<l.length?l[n]:k}function ih(n){return n<b.length?b[n]:d}function rh(n){dr.replace(n)}function hr(n,t){nt=n;at=t.indexOf(gf)>=0?ot+t+ot:t;y.style.cssText=hu+iu+nt+gt+at}function cr(n){y.innerHTML=ot;var t=y.offsetWidth;return n=n.replace(new RegExp("<",tt),"&lt;"),n=n.replace(new RegExp(">",tt),"&gt;"),y.innerHTML=ot+n+ot,y.offsetWidth-t*2}function lr(){return nt}function ku(n,t,i){ct||(o>=c.length&&(c[o]=r.createElement(nu),c[o].style.cssText=ne,r.body.appendChild(c[o]),_USE_MOUSE&&(e(c[o],ft,fr),e(c[o],pi,er),e(c[o],et,or))),c[o].style.cssText=ru+(oi(u)+t)+uu+(si(u)+i-nt)+te+g+iu+nt+gt+at,n=n.replace(new RegExp("<",tt),"&lt;"),n=n.replace(new RegExp(">",tt),"&gt;"),c[o].innerHTML=n,o++)}function du(){return!!r.createElement(ni).canPlayType}function uh(n){var t=r.createElement(ni);return!t.canPlayType?!1:t.canPlayType(n).replace(new RegExp(ie),"")!=""}function ar(){this.element=null;this.state=0;this.volume=100;this.id=rt()}function fh(){this.element=null;this.src=null;this.tag=null}function h(){return _USE_AUDIOEX&&!du()?!0:!1}function eh(n){if(h())return vr(n);try{var t=new ar;return t.element=new Audio(""),t.element.autoplay=!1,t.element.src=n,t.element.load(),t}catch(i){}return null}function vr(n){var t=new fh;return t.src=n,t}function oh(n,t){if(h())return gu(n,t,audioExElement());try{var i=new ar;return i.element=new Audio(""),i.element.autoplay=!1,i.element.src=n,i.element.loop=t,i.element.play(),i.state=1,i}catch(r){}return null}function gu(n,t,i){var r=vr(n);return yr(r,t,i),r}function sh(n){if(h())return!0;if(n!=null)try{if(n.element.readyState>=4)return!0}catch(t){}return!1}function nf(n){if(h()){tf(n);return}if(n!=null&&n.state!=0){try{n.state==2?n.element.currentTime=0:n.state!=1||n.element.ended||(n.element.pause(),n.element.currentTime=0)}catch(t){}n.state=0}}function tf(n){n!=null&&n.element!=null&&(n.element.setAttribute(di,""),r.body.removeChild(n.element),n.element=null)}function hh(n){if((nf(n),!h())&&n!=null)try{n.element.load()}catch(t){}}function ch(n,t){if(h()){yr(n,t,audioExElement());return}if(n!=null){if(n.state==1)try{n.element.ended||(n.element.pause(),n.element.currentTime=0)}catch(i){}try{n.element.loop=t;n.element.play();n.state=1}catch(i){}}}function yr(n,t,i){n!=null&&(n.element!=null&&(n.element.setAttribute(di,""),r.body.removeChild(n.element)),n.tag=i,n.element=r.createElement(n.tag),n.element.setAttribute(di,n.src),n.tag==ni?(n.element.setAttribute(re,st),t&&n.element.setAttribute(gi,st)):n.tag==ue?t&&n.element.setAttribute(gi,fe):n.tag==ee&&(n.element.setAttribute(oe,st),n.element.setAttribute(se,he),n.element.setAttribute(ce,fu),n.element.setAttribute(le,fu),t&&(n.element.setAttribute(gi,st),n.element.setAttribute(ae,st))),r.body.appendChild(n.element))}function lh(n){if(h())return rf(n);if(n!=null&&n.state==1){try{return!n.element.ended}catch(t){}return!0}return!1}function rf(n){if(n!=null&&n.element!=null){if(n.tag==ni)try{return!n.element.ended}catch(t){}return!0}return!1}function uf(n){if(!h()&&n!=null&&n.state==1)try{n.element.ended||(n.element.pause(),n.state=2)}catch(t){}}function ah(n){if(!h()&&n!=null&&n.state==2)try{n.element.play();n.state=1}catch(t){}}function vh(n,t){if(!h()&&n!=null){n.volume=t;try{n.element.volume=n.volume/100}catch(i){}}}function yh(n){return h()?0:n!=null?n.volume:0}function ph(n){if(h())return 0;if(n!=null)try{return Math.floor(n.element.currentTime*1e3)}catch(t){}return 0}function wh(n,t,i,r){n!=null&&n.id==t&&n.state==1&&pr(n,i,r,!0)}function bh(n,t){n!=null&&n.id==t&&n.state==1&&uf(n)}function kh(n,t,i,r){try{var u=new ar;return u.element=new Audio(""),u.element.autoplay=!1,u.element.src=n,pr(u,t,i,r),u}catch(f){}return null}function pr(n,t,i,r){var u,f,e;if(n!=null)try{if(u=rt(),n.id=u,f=t/1e3,e=!1,n.state!=0)try{n.state==2?(n.element.currentTime=f,e=!0):n.state!=1||n.element.ended||(n.element.pause(),n.element.currentTime=f,e=!0)}catch(o){}if(n.element.loop=!1,n.element.play(),n.state=1,!e)try{n.element.currentTime=f}catch(o){}r?setTimeout(function(n,t,i,r){wh(n,t,i,r)},i,n,u,t,i):setTimeout(function(n,t){bh(n,t)},i,n,u)}catch(o){}}function pt(n){return n.e}function dh(n){return n.x}function gh(n){return n.y}function nc(n){return n.width}function tc(n){return n.height}function wr(n,t){n.e.src=t}function a(n){n.e.style.cssText=ru+(oi(n.p)+n.x)+uu+(si(n.p)+n.y)+ve+n.width+ye+n.height+pe}function ic(n,t){n.x=t;a(n)}function rc(n,t){n.y=t;a(n)}function uc(n,t,i){n.x=t;n.y=i;a(n)}function fc(n,t){n.width=t;a(n)}function ec(n,t){n.height=t;a(n)}function oc(n,t,i){n.width=t;n.height=i;a(n)}function ff(n,t,i,r,u){n.x=t;n.y=i;n.width=r;n.height=u;a(n)}function ef(n,t,i){n.a!=null&&(n.a.setAttribute(we,t),n.a.setAttribute(be,i))}function hi(n,t,i,r,u,f,e){this.p=n;this.e=t;this.c=i;this.m=null;this.a=null;ff(this,r,u,f,e)}function ci(n,t){n.onButtonDown=function(){processEvent(0,n.e)};n.onButtonOut=function(){processEvent(1,n.e)};n.onButtonOver=function(){processEvent(2,n.e)};n.onButtonUp=function(){processEvent(3,n.e)};var i=t?n.a:n.e;_USE_MOUSE&&(e(i,ft,n.onButtonDown),e(i,kt,n.onButtonOut),e(i,dt,n.onButtonOver),e(i,et,n.onButtonUp));_USE_TOUCH&&(e(i,ai,n.onButtonDown),e(i,vi,n.onButtonOver),e(i,yi,n.onButtonUp))}function br(n,t,i,u,f,e){var o=new hi(n,r.createElement(eu),!0,i,u,f,e);return wr(o,t),r.body.appendChild(o.e),ci(o,!1),o}function sc(n,t,i,u,f,e,o,s,h){var c=new hi(n,r.createElement(eu),!0,i,u,f,e);return wr(c,t),c.e.setAttribute(ke,de+o),c.e.setAttribute(ge,no),r.body.appendChild(c.e),c.m=r.createElement(to),c.m.setAttribute(io,o),r.body.appendChild(c.m),c.a=r.createElement(ro),ef(c,s,h),c.m.appendChild(c.a),ci(c,!0),c}function hc(n,t,i,u,f,e){var o=new hi(n,r.getElementById(t),!1,i,u,f,e);return ci(o,!1),o}function cc(n,t,i,u,f,e,o){var s=new hi(n,r.getElementById(t),!1,i,u,f,e);return s.a=r.getElementById(o),ci(s,!0),s}function of(n){if(n.c){var t=n.a!=null?n.a:n.e;_USE_MOUSE&&(s(t,ft,n.onButtonDown),s(t,kt,n.onButtonOut),s(t,dt,n.onButtonOver),s(t,et,n.onButtonUp));_USE_TOUCH&&(s(t,ai,n.onButtonDown),s(t,vi,n.onButtonOver),s(t,yi,n.onButtonUp));r.body.removeChild(n.e)}}function kr(){this.f=0}function sf(){this.f=0;this.s=1}function lc(n){li++;var t=new Image;return t.onload=function(){li--},t.src=n,t}function ac(){return li>0}function hf(n,t){this.image=new Image;this.canvas=r.createElement(gr);this.context=this.canvas.getContext(tu);this.canvas.width=n;this.canvas.height=t;this.context.textAlign=wi;this.context.textBaseline=bi}function cf(n){this.s=n;this.o=[];this.id=-1}function vc(n){return wt.int(n)}function yc(n,t){return wt.div(n,t)}function pc(n,t){return wt.mod(n,t)}function lf(){}function vf(n){this.o=new Array(n);this.n=0}var r=n.document,dr=n.location,wc=n.navigator,gr="canvas",yf="keydown",pf="keyup",ai="touchstart",vi="touchmove",yi="touchend",nu="span",bt="on",ft="mousedown",pi="mousemove",kt="mouseout",dt="mouseover",et="mouseup",tu="2d",wi="left",bi="bottom",wf="?",ki="=",tt="igm",v=",",bf="circle",kf="poly",df="rect",gf=" ",ot="'",iu=";font:",gt="px ",ne="position:absolute",ru="position:absolute;left:",uu="px;top:",te="px;color:",ni="audio",ie="no",di="src",re="autoplay",st="true",gi="loop",ue="bgsound",fe="infinite",ee="embed",oe="autostart",se="hidden",he="false",ce="width",fu="1",le="height",ae="repeat",ve="px;width:",ye="px;height:",pe="px",we="shape",be="coords",eu="img",ke="usemap",de="#",ge="border",no="0",to="map",io="name",ro="area",ou="rgb(",nr=")",uo="rgba(",tr,li,wt,af;n._USE_AUDIOEX=!1;n._USE_DRAWSTRINGEX=!1;n._USE_EXCANVAS=!1;n._USE_KEY=!1;n._USE_MOUSE=!1;n._USE_TOUCH=!1;n._USE_LAYOUTMOUSE=!1;n._USE_LAYOUTTOUCH=!1;n._USE_REQUESTANIMATIONFRAME=!1;var ti=!1,ii,ht,w,u=null,t,ct,ri,lt=0,f,it=!1,i=[],ui,fi,ei=!1,l=[],b=[],k,d,g,nt,at,c=[],o,y,hu="visibility:hidden;position:absolute;left:0;top:0";tr=function(){if(_USE_DRAWSTRINGEX&&(o=0),t.clearRect(0,0,ir(),rr()),t.save(),paint(ri),t.restore(),_USE_DRAWSTRINGEX)for(var n=o;n<c.length;n++)c[n].innerHTML=""};kr.prototype={canUseClip:function(){return!!t.clip},canUseText:function(){return!!t.fillText},getColorOfRGB:function(n,t,i){return ou+n+v+t+v+i+nr},getColorOfRGBA:function(n,t,i,r){return uo+n+v+t+v+i+v+r/255+nr},setStrokeWidth:function(n){t.lineWidth=n},setColor:function(n){g=n;t.fillStyle=g;t.strokeStyle=g},setAlpha:function(n){t.globalAlpha=n/255},setROP:function(n){t.globalCompositeOperation=n},setFont:function(n,i){hr(n,i);t.font=""+nt+gt+at},stringWidth:function(n){return cr(n)},fontHeight:function(){return lr()},clearClip:function(){t.restore();t.save()},setClip:function(n,i,r,u){!t.clip||(t.restore(),t.save(),t.beginPath(),t.moveTo(n,i),t.lineTo(n+r,i),t.lineTo(n+r,i+u),t.lineTo(n,i+u),t.closePath(),t.clip())},drawLine:function(n,i,r,u){t.beginPath();t.moveTo(n+.5,i+.5);t.lineTo(r+.5,u+.5);t.stroke();t.closePath()},drawRect:function(n,i,r,u){t.strokeRect(n+.5,i+.5,r,u)},fillRect:function(n,i,r,u){t.fillRect(n,i,r,u)},drawCircle:function(n,i,r){t.beginPath();t.arc(n,i,r,0,Math.PI*2,!1);t.stroke()},drawString:function(n,i,r){t.fillText?t.fillText(n,i,r):_USE_DRAWSTRINGEX&&ku(n,i,r)},setFlipMode:function(n){this.f=n},drawScaledImage:function(n,i,r,u,f,e,o,s,h){if(this.f==0)try{t.drawImage(n,e,o,s,h,i,r,u,f)}catch(c){}else{t.save();t.setTransform(1,0,0,1,0,0);switch(this.f){case 1:t.translate(i+u,r);t.scale(-1,1);break;case 2:t.translate(i,r+f);t.scale(1,-1);break;case 3:t.translate(i+u,r+f);t.scale(-1,-1)}try{t.drawImage(n,e,o,s,h,0,0,u,f)}catch(c){}t.restore()}},drawImage:function(n,t,i){this.drawScaledImage(n,t,i,n.width,n.height,0,0,n.width,n.height)},drawTransImage:function(n,i,r,u,f,e,o,s,h,c,l,a){t.save();t.setTransform(1,0,0,1,0,0);t.translate(i,r);t.rotate(Math.PI*c/180);t.scale(l/128,a/128);t.translate(-s,-h);try{t.drawImage(n,u,f,e,o,0,0,e,o)}catch(v){}t.restore()}};sf.prototype={canUseClip:function(){return!!t.clip},canUseText:function(){return!!t.fillText},setScale:function(n){this.s=n},scale:function(){return this.s},getColorOfRGB:function(n,t,i){return ou+n+v+t+v+i+nr},setStrokeWidth:function(n){t.lineWidth=n*this.s},setColor:function(n){g=n;t.fillStyle=g;t.strokeStyle=g},setAlpha:function(n){t.globalAlpha=n/255},setROP:function(n){t.globalCompositeOperation=n},setFont:function(n,i){hr(Math.floor(n*this.s),i);t.font=""+nt+gt+at},stringWidth:function(n){return this.s==0?0:cr(n)/this.s},fontHeight:function(){return this.s==0?0:lr()/this.s},clearClip:function(){t.restore();t.save()},setClip:function(n,i,r,u){!t.clip||(t.restore(),t.save(),t.beginPath(),t.moveTo(n*this.s,i*this.s),t.lineTo(n*this.s+r*this.s,i*this.s),t.lineTo(n*this.s+r*this.s,i*this.s+u*this.s),t.lineTo(n*this.s,i*this.s+u*this.s),t.closePath(),t.clip())},drawLine:function(n,i,r,u){t.beginPath();t.moveTo((n+.5)*this.s,(i+.5)*this.s);t.lineTo((r+.5)*this.s,(u+.5)*this.s);t.stroke();t.closePath()},drawRect:function(n,i,r,u){t.strokeRect((n+.5)*this.s,(i+.5)*this.s,r*this.s,u*this.s)},fillRect:function(n,i,r,u){t.fillRect(n*this.s,i*this.s,r*this.s,u*this.s)},drawCircle:function(n,i,r){t.beginPath();t.arc(n*this.s,i*this.s,r*this.s,0,Math.PI*2,!1);t.stroke()},drawString:function(n,i,r){t.fillText?t.fillText(n,i*this.s,r*this.s):_USE_DRAWSTRINGEX&&ku(n,i*this.s,r*this.s)},setFlipMode:function(n){this.f=n},drawScaledImage:function(n,i,r,u,f,e,o,s,h){if(this.f==0)try{t.drawImage(n,e,o,s,h,i*this.s,r*this.s,u*this.s,f*this.s)}catch(c){}else{t.save();t.setTransform(1,0,0,1,0,0);switch(this.f){case 1:t.translate((i+u)*this.s,r*this.s);t.scale(-this.s,this.s);break;case 2:t.translate(i*this.s,(r+f)*this.s);t.scale(this.s,-this.s);break;case 3:t.translate((i+u)*this.s,(r+f)*this.s);t.scale(-this.s,-this.s)}try{t.drawImage(n,e,o,s,h,0,0,u,f)}catch(c){}t.restore()}},drawImage:function(n,t,i){this.drawScaledImage(n,t,i,n.width,n.height,0,0,n.width,n.height)},drawTransImage:function(n,i,r,u,f,e,o,s,h,c,l,a){t.save();t.setTransform(1,0,0,1,0,0);t.translate(i*this.s,r*this.s);t.rotate(Math.PI*c/180);t.scale(l*this.s/128,a*this.s/128);t.translate(-s,-h);try{t.drawImage(n,u,f,e,o,0,0,e,o)}catch(v){}t.restore()}};li=0;hf.prototype={lock:function(){this.sav_canvas=u;this.sav_context=t;this.sav_lock=ct;u=this.canvas;t=this.context;ct=!0;t.clearRect(0,0,u.width,u.height);t.save()},unlock:function(){t.restore();u=this.sav_canvas;t=this.sav_context;ct=this.sav_lock;this.image.src=this.canvas.toDataURL()},getWidth:function(){return this.canvas.width},getHeight:function(){return this.canvas.height},getImage:function(){return this.image}};cf.prototype={clear:function(){for(var n=0;n<this.o.length;n++)of(this.o[n]);this.o=[]},add:function(n,t,i,r,f){this.o[this.o.length]=br(u,this.s,n,t,i,r);this.o[this.o.length-1].id=f},addArea:function(n,t,i,r,f,e,o,s){this.o[this.o.length]=br(u,this.s,n,t,i,r,e,o,s);this.o[this.o.length-1].id=f},get:function(n){for(var t=0;t<this.o.length;t++)if(this.o[t].id==n)return this.o[t];return null},check:function(){return this.id},handleEvent:function(n,t){var i;switch(n){case 0:for(i=0;i<this.o.length;i++)if(t==pt(this.o[i])){processEvent(6,this.o[i].id);break}break;case 1:for(i=0;i<this.o.length;i++)if(t==pt(this.o[i])){this.id=-1;break}break;case 2:for(i=0;i<this.o.length;i++)if(t==pt(this.o[i])){this.id=this.o[i].id;break}break;case 3:for(i=0;i<this.o.length;i++)if(t==pt(this.o[i])){processEvent(7,this.o[i].id);break}break;case 14:for(i=0;i<this.o.length;i++)a(this.o[i])}}};wt={int:function(n){return n<0?Math.ceil(n):Math.floor(n)},div:function(n,t){return n<0?Math.ceil(n/t):Math.floor(n/t)},mod:function(n,t){return n<0?(n=-n,-(n-Math.floor(n/t)*t)):n-Math.floor(n/t)*t}};lf.prototype={next:function(n){return Math.random()<.5?-Math.floor(Math.random()*n):Math.floor(Math.random()*n)},nextInt:function(){return Math.random()<.5?-Math.floor(Math.random()*2147483648):Math.floor(Math.random()*2147483648)}};af={arraycopy:function(n,t,i,r,u){for(var f=0;f<u;f++)i[r+f]=n[t+f]}};vf.prototype={size:function(){return this.n},isEmpty:function(){return this.n==0},elementAt:function(n){return this.o[n]},firstElement:function(){return this.o[0]},lastElement:function(){return this.o[this.n-1]},setElementAt:function(n,t){t>=0&&t<this.n&&(this.o[t]=n)},removeElementAt:function(n){if(n>=0&&n<this.n){for(this.i=n;this.i<this.n-1;this.i++)this.o[this.i]=this.o[this.i+1];this.n--}},insertElementAt:function(n,t){if(t>=0&&t<this.n){for(this.i=this.n-1;this.i>=t;this.i--)this.o[this.i+1]=this.o[this.i];this.o[t]=n;this.n++}},addElement:function(n){this.o[this.n]=n;this.n++},removeAllElements:function(){this.n=0}};n.canUseCanvas=su;n.d2js_onload=fo;n.d2js_onorientationchange=eo;n.d2js_onresize=oo;n.setTimer=cu;n.killTimer=so;n.setRepaintFunc=ho;n.removeMouseEvent=co;n.addMouseEvent=au;n.setCurrent=lo;n.setGraphics=ao;n.getCurrent=vo;n.getCurrentContext=yo;n.getGraphics=po;n.setCanvas=wo;n.setContext=bo;n.initLock=vu;n.setCanvasSize=ko;n.getWidth=ir;n.getHeight=rr;n.getBrowserWidth=go;n.getBrowserHeight=ns;n.getOrientation=ts;n.readParameter=yu;n.readParameters=is;n.getParameter=rs;n.getResImage=us;n.getResString=fs;n.currentTimeMillis=rt;n.setKeyArray=es;n.keyBit=ur;n.getKeypadState=hs;n.clearLayout=ls;n.addLayout=pu;n.addLayoutArea=as;n.getLayout=vs;n.checkLayout=ut;n.getLayoutState=ys;n.layoutBit=ps;n.getMouseX=ws;n.getMouseY=bs;n.touchNum=nh;n.getTouchX=th;n.getTouchY=ih;n.launch=rh;n.setFont=hr;n.stringWidth=cr;n.fontHeight=lr;n.canUseAudio=du;n.canPlayType=uh;n.loadAudio=eh;n.loadAudioEx=vr;n.loadAndPlayAudio=oh;n.loadAndPlayAudioEx=gu;n.isLoaded=sh;n.stopAudio=nf;n.stopAudioEx=tf;n.reloadAudio=hh;n.playAudio=ch;n.playAudioEx=yr;n.isPlaying=lh;n.isPlayingEx=rf;n.pauseAudio=uf;n.restartAudio=ah;n.setVolume=vh;n.getVolume=yh;n.getCurrentTime=ph;n.loadAndPlayAudioSprite=kh;n.playAudioSprite=pr;n.buttonElement=pt;n.buttonX=dh;n.buttonY=gh;n.buttonWidth=nc;n.buttonHeight=tc;n.setButtonSrc=wr;n.updateButtonPos=a;n.setButtonX=ic;n.setButtonY=rc;n.setButtonPos=uc;n.setButtonWidth=fc;n.setButtonHeight=ec;n.setButtonSize=oc;n.setButtonPosSize=ff;n.setButtonArea=ef;n.createButton=br;n.createButtonArea=sc;n.attachButton=hc;n.attachButtonArea=cc;n.removeButton=of;n._Graphics=kr;n._ScalableGraphics=sf;n.loadImage=lc;n.isImageBusy=ac;n._Image=hf;n._Layout=cf;n._Math=wt;n._INT=vc;n._DIV=yc;n._MOD=pc;n._Random=lf;n._System=af;n._Vector=vf;n._KEY_BACKSPACE=8;n._KEY_TAB=9;n._KEY_ENTER=13;n._KEY_SELECT=n._KEY_ENTER;n._KEY_SHIFT=16;n._KEY_CTRL=17;n._KEY_SPACE=32;n._KEY_LEFT=37;n._KEY_UP=38;n._KEY_RIGHT=39;n._KEY_DOWN=40;n._KEY_0=48;n._KEY_1=49;n._KEY_2=50;n._KEY_3=51;n._KEY_4=52;n._KEY_5=53;n._KEY_6=54;n._KEY_7=55;n._KEY_8=56;n._KEY_9=57;n._KEY_A=65;n._KEY_B=66;n._KEY_C=67;n._KEY_D=68;n._KEY_E=69;n._KEY_F=70;n._KEY_G=71;n._KEY_H=72;n._KEY_I=73;n._KEY_J=74;n._KEY_K=75;n._KEY_L=76;n._KEY_M=77;n._KEY_N=78;n._KEY_O=79;n._KEY_P=80;n._KEY_Q=81;n._KEY_R=82;n._KEY_S=83;n._KEY_T=84;n._KEY_U=85;n._KEY_V=86;n._KEY_W=87;n._KEY_X=88;n._KEY_Y=89;n._KEY_Z=90;n._ROP_COPY="source-over";n._ROP_ADD="lighter";n._FLIP_NONE=0;n._FLIP_HORIZONTAL=1;n._FLIP_VERTICAL=2;n._FLIP_ROTATE=3;n._BUTTON_DOWN_EVENT=0;n._BUTTON_OUT_EVENT=1;n._BUTTON_OVER_EVENT=2;n._BUTTON_UP_EVENT=3;n._KEY_PRESSED_EVENT=4;n._KEY_RELEASED_EVENT=5;n._LAYOUT_DOWN_EVENT=6;n._LAYOUT_UP_EVENT=7;n._MOUSE_DOWN_EVENT=8;n._MOUSE_MOVE_EVENT=9;n._MOUSE_OUT_EVENT=10;n._MOUSE_OVER_EVENT=11;n._MOUSE_UP_EVENT=12;n._ORIENTATIONCHANGE_EVENT=13;n._RESIZE_EVENT=14;n._TOUCH_START_EVENT=15;n._TOUCH_MOVE_EVENT=16;n._TOUCH_END_EVENT=17})(window)